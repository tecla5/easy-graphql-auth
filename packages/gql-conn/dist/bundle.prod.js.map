{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 093897357921147fd48b","webpack:///../token-foundation/src/keynames.js","webpack:///../token-foundation/src/notifiable.js","webpack:///../token-foundation/src/store.js","webpack:///./src/gql-connection.js","webpack:///./src/index.js","webpack:///../token-foundation/src/configurable.js","webpack:///../token-foundation/src/index.js","webpack:///../token-foundation/src/is-type.js","webpack:///../token-foundation/src/loggable.js","webpack:///./~/process/browser.js"],"names":[],"mappings":"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","file":"bundle.prod.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"easyGqlAuth\"] = factory();\n\telse\n\t\troot[\"easyGqlAuth\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 093897357921147fd48b","export default {\n  authTokenKeyName: 'auth0Token',\n  gqlServerTokenKeyName: 'gqlServerAuthToken', // for GraphQL servers\n  serverTokenKeyName: 'serverAuthToken' // for misc servers/storage systems\n}\n\n\n\n// WEBPACK FOOTER //\n// ../token-foundation/src/keynames.js","import {\n  Loggable\n} from './loggable'\n\nexport class Notifiable extends Loggable {\n  constructor(name, opts) {\n    super(name, opts)\n    this.notifyLog = opts.notifyLog\n    this.topic = opts.topic || this.defaultTopic\n    this.notifyError = this.notifyFailure\n    this.observers = {}\n  }\n\n  log(msg, data) {\n    if (this.notifyLog === false) return\n    super.log(msg, data)\n  }\n\n  get defaultTopic() {\n    return 'default'\n  }\n\n  notify(event, data) {\n    let criteria = this._criteria(event, data, )\n    this.publish(criteria, data)\n  }\n\n  _criteria(event, data, opts = {}) {\n    return Object.assign({}, {\n      topic: this.topic,\n      event,\n      data\n    }, opts)\n  }\n\n  notifySuccess(event, data) {\n    let criteria = this._criteria(event, data, {\n      status: 'success'\n    })\n    this.publish(criteria, data)\n  }\n\n  notifyFailure(event, data) {\n    let criteria = this._criteria(event, data, {\n      status: 'failure'\n    })\n    this.publish(criteria, data)\n  }\n\n  onCriteria(criteria, observer) {\n    this.log('onCriteria', criteria, observer)\n    let {\n      topic,\n      event,\n      status\n    } = criteria\n    topic = topic || this.topic\n    this.observers[topic] = this.observers[topic] || {}\n    this.observers[topic][event] = this.observers[topic][event] || {}\n\n    let eventObservers = this.observers[topic][event]\n    if (status) {\n      eventObservers[status] = this.observers[topic][event][status] || []\n      eventObservers[status] = eventObservers[status].concat(observer)\n    } else {\n      eventObservers['observers'] = eventObservers['observers'] || []\n      eventObservers['observers'] = eventObservers['observers'].concat(observer)\n    }\n    return this\n  }\n\n  onStatus(event, status, observer) {\n    let criteria\n    if (typeof event === 'object') {\n      criteria = event\n    } else {\n      criteria = {\n        event\n      }\n    }\n    criteria.status = status\n    return this.onCriteria(criteria, observer)\n  }\n\n  onSuccess(criteria, observer) {\n    return this.onStatus(criteria, 'success', observer)\n  }\n\n  onFailure(criteria, observer) {\n    return this.onStatus(criteria, 'failure', observer)\n  }\n\n  on(event, observer) {\n    this.log('on', event, observer)\n    if (typeof event === 'object') {\n      let criteria = event\n      return this.onCriteria(criteria, observer)\n    }\n    let slot = this.observers[event] || []\n    this.observers[event] = slot.concat(observer)\n    return this\n  }\n\n  onAll(events, observer) {\n    if (Array.isArray(events)) {\n      events.map(event => this.on(event, observer))\n      return this\n    } else {\n      this.handleError('onAll: first argument must be a list (Array) of events to observe', eventNames)\n    }\n  }\n\n  publishCriteria(criteria, data) {\n    this.log('publishCriteria', criteria, data)\n    if (typeof criteria === 'string') {\n      let event = criteria\n      return this.publish(event, data)\n    }\n    let {\n      topic,\n      event,\n      status\n    } = criteria\n\n    this.observers = this.observers || {}\n    let observers = this.observers[topic] || {}\n    observers = observers[event] || {}\n\n    this.publishTo(observers['observers'], data, criteria)\n    this.publishTo(observers[status], data, criteria)\n  }\n\n  publishTo(observers, data, criteria) {\n    if (Array.isArray(observers)) {\n      observers.map(observer => observer(data))\n    } else {\n      this.log('no observers registered for', criteria)\n    }\n    return this\n  }\n\n  publish(event, data) {\n    this.log('publish', event, data)\n\n    if (typeof event === 'object') {\n      let criteria = this._criteria(event, data)\n      this.publishCriteria(criteria, data)\n    }\n\n    this.observers = this.observers || {}\n    let observers = this.observers[event] || []\n    if (observers) {\n      observers.map(observer => observer(data))\n    } else {\n      this.log('no observers registered for', event)\n    }\n    return this\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../token-foundation/src/notifiable.js","import {\n  Notifiable\n} from './notifiable'\n\nimport defaultKeyNames from './keynames'\n\nfunction isObj(val) {\n  return typeof val === 'object' && val !== null\n}\n\nexport function createStore(keyNames, opts = {}) {\n  return new Store(keyNames, opts)\n}\n\nexport class Store extends Notifiable {\n  constructor(keyNames, opts = {}) {\n    super('Store', opts)\n    this.configured = {}\n    this.validated = {}\n    this.keyNames = keyNames\n    this.opts = opts\n    this.log('create', {\n      keyNames: this.keyNames,\n      opts: this.opts\n    })\n    this.configure()\n    this.postConfigure()\n  }\n\n  configure(force) {\n    if (this.configured.Store && !force) return\n    this.configured.Store = false\n    let keyNames = this.keyNames || {}\n    let opts = this.opts\n    try {\n      this.keyNames = Object.assign({}, this.defaultKeyNames, keyNames.storage || keyNames)\n      this.configureKeyNames()\n\n      this.storage = opts.store || opts.keyStore || this.localStorage\n      this.configured.Store = true\n    } catch (err) {\n      this.handleError('Store.configure', {\n        opts,\n        keyNames,\n        errMsg: err.message,\n        cause: err\n      })\n    }\n  }\n\n  get defaultKeyNames() {\n    return defaultKeyNames\n  }\n\n  configureKeyNames(keyNames) {\n    keyNames = keyNames || this.keyNames\n    if (!isObj(keyNames)) {\n      this.handleError('keyNames must be an Object', {\n        keyNames,\n        defaultKeyNames: this.defaultKeyNames\n      })\n    }\n    // TODO: set in this.keys object instead\n    this.authTokenKeyName = keyNames.authTokenKeyName\n    this.gqlServerTokenKeyName = keyNames.gqlServerTokenKeyName\n    this.serverTokenKeyName = keyNames.serverTokenKeyName\n  }\n\n  postConfigure() {\n    this.validateConfig()\n  }\n\n  validateConfig() {\n    this.validated.Store = false\n    this.log('validateConfig')\n    this.validateAllKeyNames()\n    this.validated.Store = true\n  }\n\n  // TODO: iterate and validate keys in store\n  validateAllKeyNames() {\n    this.validateKeyName('authTokenKeyName')\n    this.validateKeyName('gqlServerTokenKeyName', 'warn')\n    this.validateKeyName('serverTokenKeyName', 'warn')\n  }\n\n  validateKeyName(keyName, method) {\n    if (!this[keyName]) {\n      this[method](`Store: key ${keyName} not defined`, {\n        keyNames: this.keyNames,\n        store: this\n      })\n    }\n  }\n\n  validateKeyNames(...names) {\n    names.map(name => this.validateKeyName(name))\n  }\n\n  get localStorage() {\n    try {\n      return window.localStorage\n    } catch (err) {\n      this.handleError('missing global window Object to retrieve localStorage')\n    }\n  }\n\n  removeItem(name) {\n    this.storage.removeItem(name)\n    this.publish('remove', {\n      name\n    })\n    return this\n  }\n\n  getItem(name) {\n    return this.storage.getItem(name)\n  }\n\n  setItem(name, value) {\n    this.storage.setItem(name, value)\n    this.publish('set', {\n      name,\n      value\n    })\n    return this\n  }\n\n  // TODO: iterate and remove keys in store\n  resetAll() {\n    this.removeItem(this.authTokenKeyName)\n    this.removeItem(this.gqlServerTokenKeyName)\n    this.removeItem(this.serverTokenKeyName)\n\n    this.publish('reset')\n    return this\n  }\n\n  // TODO: iterate and (reduce) return keys in store\n  getAll(opts = {}) {\n    return {\n      authToken: this.getItem(this.authTokenKeyName),\n      gqlServerToken: this.getItem(this.gqlServerTokenKeyName),\n      serverToken: this.getItem(this.serverTokenKeyName),\n    }\n  }\n\n  store(keyName, value, opts = {}) {\n    if (this.keyNames.indexOf(keyName) < 0) {\n      throw Error(`keyname mismatch for store: ${keyName}`)\n    }\n\n    this.setItem(keyName, value)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../token-foundation/src/store.js","import {\n  Configurable\n} from '@tecla5/token-foundation'\n\nexport function createConnection(config, opts) {\n  return new GraphQLConnection(config, opts)\n}\n\nexport class GraphQLConnection extends Configurable {\n  constructor(config = {}, opts = {}) {\n    super(config, opts)\n    this.name = 'GraphQLConnection'\n    this.configure()\n    this.postConfig()\n  }\n\n  configure() {\n    super.configure()\n\n    if (this.configured.GraphQLConnection) return\n    let config = this.config\n\n    let gqlServer = config.gqlServer\n    if (!gqlServer) {\n      this.configError('missing gqlServer object in configuration')\n    }\n\n    this.log('gqlServer config', {\n      gqlServer\n    })\n    gqlServer.endpoint = process.env.gqlServer_endpoint || gqlServer.endpoint || gqlServer.connection.uri\n\n    this.config.gqlServer = gqlServer || {}\n    return this\n  }\n\n  prepareQuery(query, opts = {}) {\n    this.log('doQuery', {\n      query,\n      opts\n    })\n    if (!this.client) {\n      this.handleError('doQuery: missing client')\n    }\n\n    if (!query) {\n      this.handleError('doQuery: query is not defined', query)\n    }\n\n    if (this.isGqlQuery(query)) {\n      query = this.toGqlQuery(query)\n    }\n    return query\n  }\n\n  async doQuery(query, opts = {}) {\n    this.log('doQuery', {\n      query,\n      opts\n    })\n    this.handleError('doQuery: must be implemented by subclass')\n  }\n\n  isGqlQuery(query) {\n    if (typeof query !== 'object') return false\n    // see: https://www.npmjs.com/package/graphql-tag\n    if (query.kind === 'Document') return true\n    return false\n  }\n\n  toGqlQuery(queryStr, opts) {\n    if (typeof query !== 'string') {\n      this.handleError('toGqlQuery: bad query', queryStr)\n    }\n    if (typeof this.gql !== 'function') {\n      this.log('Try: https://www.npmjs.com/package/graphql-tag')\n      this.error('Also see: https://www.npmjs.com/package/graphql')\n      this.handleError('missing gql function to convert query string to GraphQL query')\n    }\n    return this.gql(query, opts)\n  }\n\n  postConfig() {\n    this.validateConfig()\n    this.configured.GraphQLConnection = true\n  }\n\n  validateConfig(force) {\n    if (this.validated.GraphQLConnection && !force) return\n    this.validated.GraphQLConnection = false\n    super.validateConfig(force)\n    this.validated.GraphQLConnection = true\n  }\n\n  get defaultHeaders() {\n    return null\n  }\n\n  setJwtToken(signinToken, opts = {}) {\n    this.log('setJwtToken not yet implemented on GraphQL server Connection :(', {\n      signinToken\n    })\n  }\n\n  get authTokenKeyName() {\n    return process.env.gqlServer_tokenKeyName || this.keyNames.gqlServerTokenKeyName\n  }\n\n  get authToken() {\n    return this.store.getItem(this.authTokenKeyName) || null\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/gql-connection.js","export {\n  GraphQLConnection,\n  createConnection\n}\nfrom './gql-connection'\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import defaultKeyNames from './keynames'\nimport {\n  Notifiable\n} from './notifiable'\n\nimport {\n  Store,\n  createStore\n} from './store'\n\nimport {\n  isFun,\n  isObject,\n  isArray\n} from './is-type'\n\nexport class Configurable extends Notifiable {\n  constructor(config = {}, opts = {}) {\n    super('Configurable', opts)\n    this.configured = {}\n    this.validated = {}\n\n    this.validate(config)\n    this.log('configuring with', {\n      config,\n      opts\n    })\n    this.opts = this.opts || opts\n    this.config = config\n    this.configure()\n    this.postConfig()\n  }\n\n  configure() {\n    if (this.configured.Configurable) return\n    this.log('Configurable: configure')\n    this.observers = {}\n    this.configureStorage()\n    this.configured.Configurable = true\n    return this\n  }\n\n  postConfig() {\n    this.validateConfig()\n    this.retrieveTokens()\n    return this\n  }\n\n  configureStorage() {\n    this.log('configureStorage')\n    let config = this.config\n    let opts = this.opts\n    let containers = [config, opts]\n    this.extractProperties(containers, 'storage', 'keyNames', 'store')\n    this.keyNames = this.keyNames || this.storage || defaultKeyNames\n    this.store = this.store || this.createStore(this.keyNames, this.opts)\n    return this\n  }\n\n  validateConfig(force = false) {\n    if (this.validated.Configurable && !force) return\n    this.log('validateConfig', {\n      store: this.store,\n      keyNames: this.keyNames\n    })\n    if (typeof this.store !== 'object') {\n      this.configError('missing store for holding auth tokens')\n    }\n\n    if (typeof this.keyNames !== 'object') {\n      this.configError('missing keyNames object, used to indicate store token keys')\n    }\n    this.validated.Configurable = true\n  }\n\n  retrieveTokens() {\n    this.log('retrieveTokens', {\n      store: this.store\n    })\n    if (!isFun(this.store.getAll)) {\n      this.error(\"Store is missing function getAll to retrieve tokens\")\n    }\n    this.tokens = this.store.getAll() || {}\n    return this\n  }\n\n  extractProperty(containers, name, selfie) {\n    this.log('extractProperty', name, {\n      self: selfie\n    })\n    if (!isArray(containers)) {\n      this.handleError('extractProperty: containes must be an Array', containers)\n    }\n\n    let container = containers.find(container => (container || {})[name]) || {}\n    let value = container[name]\n    if (!value) {\n      this.warn('no value found for', name)\n    }\n    if (selfie && value) {\n      let displayValue = isFun(value) ? value.name : value\n      this.log('extract: set', name, 'to', displayValue)\n      this[name] = value\n    }\n    return value\n  }\n\n  extractProps(selfie, containers, ...names) {\n    this.log('extractProperties', names)\n    return names.reduce((acc, name) => {\n      let value = this.extractProperty(containers, name, selfie)\n      acc[name] = value\n      return acc\n    }, {})\n  }\n\n  extractProperties(containers, ...names) {\n    return this.extractProps(true, containers, ...names)\n  }\n\n  configError(msg) {\n    this.handleError(msg)\n  }\n\n  createStore(keyNames, opts = {}) {\n    let {\n      createStore\n    } = opts\n    keyNames = keyNames || this.keyNames\n    opts = opts || this.opts\n    this.log('createStore', {\n      keyNames,\n      opts\n    })\n\n    createStore = isFun(createStore) ? createStore : this.defaultCreateStore\n    this.log('create with', {\n      createStore\n    })\n    return createStore(keyNames, opts)\n  }\n\n  defaultCreateStore(keyNames, opts) {\n    return createStore(keyNames, opts)\n  }\n\n  validate(config) {\n    if (!isObject(config)) {\n      this.handleError('config must be an object', config)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../token-foundation/src/configurable.js","export {\n  Configurable\n}\nfrom './configurable'\n\nexport {\n  keyNames\n}\nfrom './keynames'\n\nexport {\n  Store,\n  createStore\n}\nfrom './store'\n\n\n// WEBPACK FOOTER //\n// ../token-foundation/src/index.js","export function isFun(fun) {\n  return typeof fun === 'function'\n}\n\nexport function isObject(obj) {\n  return typeof obj === 'object'\n}\n\nexport function isArray(obj) {\n  return Array.isArray(obj)\n}\n\n\n// WEBPACK FOOTER //\n// ../token-foundation/src/is-type.js","export class Loggable {\n  constructor(name, opts = {}) {\n    this.opts = opts\n    this.io = opts.io || console\n    this.logging = opts.logging\n    this.name = name || opts.name\n  }\n\n  handleError(err, data) {\n    this.error(err, data)\n    if (this.notify) {\n      this.notify('error', data)\n    }\n    throw err\n  }\n\n  enableLog() {\n    this.logging = true\n    return this\n  }\n\n  disableLog() {\n    this.logging = false\n    return this\n  }\n\n  label(lv) {\n    lv = lv.toUpperCase()\n    return `[${this.name}] ${lv}:`\n  }\n\n  warn(msg, data) {\n    if (this.logging) {\n      return this.io.log(this.label('warning'), msg, data)\n    }\n  }\n\n  log(msg, data) {\n    if (this.logging) {\n      return this.io.log(this.label('info'), msg, data)\n    }\n  }\n\n  error(msg, data) {\n    if (this.logging) {\n      return this.io.error(this.label('error'), msg, data)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../token-foundation/src/loggable.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process/browser.js\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}