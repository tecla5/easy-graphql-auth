(function(C,D){'object'==typeof exports&&'object'==typeof module?module.exports=D():'function'==typeof define&&define.amd?define([],D):'object'==typeof exports?exports.easyGqlAuth=D():C.easyGqlAuth=D()})(this,function(){return function(B){function C(E){if(D[E])return D[E].exports;var F=D[E]={i:E,l:!1,exports:{}};return B[E].call(F.exports,F,F.exports,C),F.l=!0,F.exports}var D={};return C.m=B,C.c=D,C.i=function(E){return E},C.d=function(E,F,G){C.o(E,F)||Object.defineProperty(E,F,{configurable:!1,enumerable:!0,get:G})},C.n=function(E){var F=E&&E.__esModule?function(){return E['default']}:function(){return E};return C.d(F,'a',F),F},C.o=function(E,F){return Object.prototype.hasOwnProperty.call(E,F)},C.p='',C(C.s=1)}([function(B,C,D){'use strict';function E(L,M){if(!(L instanceof M))throw new TypeError('Cannot call a class as a function')}function F(L,M){if(!L)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return M&&('object'==typeof M||'function'==typeof M)?M:L}function G(L,M){if('function'!=typeof M&&null!==M)throw new TypeError('Super expression must either be null or a function, not '+typeof M);L.prototype=Object.create(M&&M.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(L,M):L.__proto__=M)}Object.defineProperty(C,'__esModule',{value:!0}),C.GraphQLConnection=void 0;var H='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&'function'==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?'symbol':typeof L},I=function(){function L(M,N){for(var P,O=0;O<N.length;O++)P=N[O],P.enumerable=P.enumerable||!1,P.configurable=!0,'value'in P&&(P.writable=!0),Object.defineProperty(M,P.key,P)}return function(M,N,O){return N&&L(M.prototype,N),O&&L(M,O),M}}(),J=D(2),K=C.GraphQLConnection=function(L){function M(){var N=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},O=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};E(this,M);var P=F(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,N,O));return P.name='GraphQLConnection',P.configure(),P}return G(M,L),I(M,[{key:'configure',value:function(){var O=this.config,P=O.gqlServer;P.endpoint=P.endpoint||P.connection.uri,this.config.gqlServer=P,this.validateConfig()}},{key:'validateConfig',value:function(){'object'!==H(this.store)&&this.configError('missing store for holding signinToken from GraphQL server'),'object'!==H(this.keyNames)&&this.configError('missing keyNames object, used to indicate store token keys')}},{key:'setJwtToken',value:function(O){1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.log('setJwtToken not yet implemented on GraphQL server Connection :(',{signinToken:O})}},{key:'defaultHeaders',get:function(){return null}},{key:'authTokenKeyName',get:function(){return this.keyNames.gqlServerTokenKeyName}},{key:'authToken',get:function(){return this.store.getItem(this.authTokenKeyName)||null}}]),M}(J.Configurable)},function(B,C,D){'use strict';Object.defineProperty(C,'__esModule',{value:!0});var E=D(0);Object.defineProperty(C,'GraphQLConnection',{enumerable:!0,get:function(){return E.GraphQLConnection}})},function(B,C,D){'use strict';(function(E){var F,G,H,I='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(J){return typeof J}:function(J){return J&&'function'==typeof Symbol&&J.constructor===Symbol&&J!==Symbol.prototype?'symbol':typeof J};(function(J,K){'object'==I(C)&&'object'==I(E)?E.exports=K():(G=[],F=K,H='function'==typeof F?F.apply(C,G):F,!(H!==void 0&&(E.exports=H)))})(void 0,function(){return function(J){function K(M){if(L[M])return L[M].exports;var N=L[M]={i:M,l:!1,exports:{}};return J[M].call(N.exports,N,N.exports,K),N.l=!0,N.exports}var L={};return K.m=J,K.c=L,K.i=function(M){return M},K.d=function(M,N,O){K.o(M,N)||Object.defineProperty(M,N,{configurable:!1,enumerable:!0,get:O})},K.n=function(M){var N=M&&M.__esModule?function(){return M['default']}:function(){return M};return K.d(N,'a',N),N},K.o=function(M,N){return Object.prototype.hasOwnProperty.call(M,N)},K.p='',K(K.s=4)}([function(J,K){'use strict';Object.defineProperty(K,'__esModule',{value:!0}),K.default={auth0IdTokenKeyName:'auth0Token',gqlServerTokenStorageKey:'graphCoolToken'},J.exports=K['default']},function(J,K,L){'use strict';function M(S,T){if(!(S instanceof T))throw new TypeError('Cannot call a class as a function')}function N(S,T){if(!S)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return T&&('object'==('undefined'==typeof T?'undefined':I(T))||'function'==typeof T)?T:S}function O(S,T){if('function'!=typeof T&&null!==T)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof T?'undefined':I(T)));S.prototype=Object.create(T&&T.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(S,T):S.__proto__=T)}Object.defineProperty(K,'__esModule',{value:!0}),K.Store=void 0;var P=function(){function S(T,U){for(var V,W=0;W<U.length;W++)V=U[W],V.enumerable=V.enumerable||!1,V.configurable=!0,'value'in V&&(V.writable=!0),Object.defineProperty(T,V.key,V)}return function(T,U,V){return U&&S(T.prototype,U),V&&S(T,V),T}}();K.createStore=function(S){var T=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new R(S,T)};var Q=L(2),R=K.Store=function(S){function T(U){var V=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};M(this,T);var W=N(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,'Store',V));return W.log('create',{keyNames:U,opts:V}),W.keyNames=U.storage||U,W.storage=V.storage||V.keyStore||window.localStorage,W.authTokenKeyName=W.keyNames.authTokenKeyName,W.gqlServerTokenKeyName=W.keyNames.gqlServerTokenKeyName,W}return O(T,S),P(T,[{key:'removeItem',value:function(V){this.storage.removeItem(V)}},{key:'getItem',value:function(V){return this.storage.getItem(V)}},{key:'setItem',value:function(V,W){this.storage.setItem(V,W)}},{key:'validateKeyNames',value:function(){for(var V=this,W=arguments.length,X=Array(W),Y=0;Y<W;Y++)X[Y]=arguments[Y];X.map(function(Z){return V.validateKeyName(Z)})}},{key:'validateKeyName',value:function(V){return'string'!=typeof this.keyNames[V]&&this.error('keyNames missing '+V),this}},{key:'error',value:function(V){console.error(V)}},{key:'resetAll',value:function(){this.removeItem(this.authTokenKeyName),this.removeItem(this.gqlServerTokenKeyName)}},{key:'getAll',value:function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},{authToken:this.getItem(this.authTokenKeyName),gqlServerToken:this.getItem(this.gqlServerTokenKeyName)}}},{key:'store',value:function(V,W){if(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},0>this.keyNames.indexOf(V))throw Error('keyname mismatch for store: '+V);this.setItem(V,W)}}]),T}(Q.Loggable)},function(J,K){'use strict';function L(O,P){if(!(O instanceof P))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(K,'__esModule',{value:!0});var M=function(){function O(P,Q){for(var R,S=0;S<Q.length;S++)R=Q[S],R.enumerable=R.enumerable||!1,R.configurable=!0,'value'in R&&(R.writable=!0),Object.defineProperty(P,R.key,R)}return function(P,Q,R){return Q&&O(P.prototype,Q),R&&O(P,R),P}}(),N=K.Loggable=function(){function O(P){var Q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};L(this,O),this.opts=Q,this.io=Q.io||console,this.logging=Q.logging,this.name=P||Q.name}return M(O,[{key:'enableLog',value:function(){return this.logging=!0,this}},{key:'disableLog',value:function(){return this.logging=!1,this}},{key:'log',value:function(){if(this.logging){for(var Q,R=arguments.length,S=Array(R),T=0;T<R;T++)S[T]=arguments[T];(Q=this.io).log.apply(Q,[this.name].concat(S))}}},{key:'error',value:function(){if(this.logging){for(var Q,R=arguments.length,S=Array(R),T=0;T<R;T++)S[T]=arguments[T];(Q=this.io).error.apply(Q,[this.name].concat(S))}}}]),O}()},function(J,K,L){'use strict';function M(X,Y){if(!(X instanceof Y))throw new TypeError('Cannot call a class as a function')}function N(X,Y){if(!X)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return Y&&('object'==('undefined'==typeof Y?'undefined':I(Y))||'function'==typeof Y)?Y:X}function O(X,Y){if('function'!=typeof Y&&null!==Y)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof Y?'undefined':I(Y)));X.prototype=Object.create(Y&&Y.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(X,Y):X.__proto__=Y)}function P(X){return'function'==typeof X}Object.defineProperty(K,'__esModule',{value:!0}),K.Configurable=void 0;var Q='function'==typeof Symbol&&'symbol'==I(Symbol.iterator)?function(X){return'undefined'==typeof X?'undefined':I(X)}:function(X){return X&&'function'==typeof Symbol&&X.constructor===Symbol&&X!==Symbol.prototype?'symbol':'undefined'==typeof X?'undefined':I(X)},R=function(){function X(Y,Z){for(var $,_=0;_<Z.length;_++)$=Z[_],$.enumerable=$.enumerable||!1,$.configurable=!0,'value'in $&&($.writable=!0),Object.defineProperty(Y,$.key,$)}return function(Y,Z,$){return Z&&X(Y.prototype,Z),$&&X(Y,$),Y}}(),S=L(0),T=function(X){return X&&X.__esModule?X:{default:X}}(S),U=L(2),V=L(1),W=K.Configurable=function(X){function Y(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},$=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};M(this,Y);var _=N(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,'Configurable',$));return _.validate(Z),_.log('configuring with',{config:Z,opts:$}),_.opts=_.opts||$,_.config=Z,_.configure(),_}return O(Y,X),R(Y,[{key:'configure',value:function(){return this.log('configure'),this.observers={},this.configureStorage(),this.validateConfig(),this.retrieveTokens(),this}},{key:'configureStorage',value:function(){var $=this.config,_=this.opts;return this.log('configureStorage'),this.extractProperties([$,_],'storage','keyNames','store'),this.keyNames=this.keyNames||this.storage||T.default,this.store=this.store||this.createStore(),this}},{key:'validateConfig',value:function(){this.store||this.configError('Missing store. Was not configured!')}},{key:'retrieveTokens',value:function(){this.log('retrieveTokens',{store:this.store}),P(this.store.getAll)||this.error('Store is missing function getAll to retrieve tokens'),this.tokens=this.store.getAll()||{}}},{key:'extractProperty',value:function($,_,aa){var ba=$.find(function(da){return(da||{})[_]})||{},ca=ba[_];return aa&&ca&&(this[_]=ca),ca}},{key:'extractProperties',value:function($){for(var _=this,aa=arguments.length,ba=Array(1<aa?aa-1:0),ca=1;ca<aa;ca++)ba[ca-1]=arguments[ca];return ba.reduce(function(da,ea){var fa=_.extractProperty($,ea,!0);return da[ea]=fa,da},{})}},{key:'configError',value:function($){throw this.error($),Error($)}},{key:'on',value:function($,_){this.log('on',$,_);var aa=this.observers[$]||[];return this.observers[$]=aa.concat(_),this}},{key:'publish',value:function($,_){this.log('publish',$,_);var aa=this.observers[$]||[];return aa?aa.map(function(ba){return ba(_)}):this.log('no observers registered for',$),this}},{key:'handleError',value:function($){throw this.error($),$}},{key:'createStore',value:function($){var _=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},aa=_,ba=aa.createStore;return $=$||this.keyNames,_=_||this.opts,this.log('createStore',{keyNames:$,opts:_}),ba=P(ba)?ba:this.defaultCreateStore,this.log('create with',{createStore:ba}),ba($,_)}},{key:'defaultCreateStore',value:function($,_){return new V.Store($,_)}},{key:'validate',value:function($){if('object'!==('undefined'==typeof $?'undefined':Q($)))throw Error('config must be an object')}}]),Y}(U.Loggable)},function(J,K,L){'use strict';Object.defineProperty(K,'__esModule',{value:!0});var M=L(3);Object.defineProperty(K,'Configurable',{enumerable:!0,get:function(){return M.Configurable}});var N=L(0);Object.defineProperty(K,'keyNames',{enumerable:!0,get:function(){return N.keyNames}});var O=L(1);Object.defineProperty(K,'Store',{enumerable:!0,get:function(){return O.Store}}),Object.defineProperty(K,'createStore',{enumerable:!0,get:function(){return O.createStore}})}])})}).call(C,D(3)(B))},function(B){B.exports=function(D){return D.webpackPolyfill||(D.deprecate=function(){},D.paths=[],!D.children&&(D.children=[]),Object.defineProperty(D,'loaded',{enumerable:!0,get:function(){return D.l}}),Object.defineProperty(D,'id',{enumerable:!0,get:function(){return D.i}}),D.webpackPolyfill=1),D}}])});
//# sourceMappingURL=bundle.prod.js.map