(function(y,z){'object'==typeof exports&&'object'==typeof module?module.exports=z():'function'==typeof define&&define.amd?define([],z):'object'==typeof exports?exports.easyGqlAuth=z():y.easyGqlAuth=z()})(this,function(){return function(x){function y(A){if(z[A])return z[A].exports;var B=z[A]={i:A,l:!1,exports:{}};return x[A].call(B.exports,B,B.exports,y),B.l=!0,B.exports}var z={};return y.m=x,y.c=z,y.i=function(A){return A},y.d=function(A,B,C){y.o(A,B)||Object.defineProperty(A,B,{configurable:!1,enumerable:!0,get:C})},y.n=function(A){var B=A&&A.__esModule?function(){return A['default']}:function(){return A};return y.d(B,'a',B),B},y.o=function(A,B){return Object.prototype.hasOwnProperty.call(A,B)},y.p='',y(y.s=2)}([function(x,y,z){'use strict';function A(H,I){if(!(H instanceof I))throw new TypeError('Cannot call a class as a function')}function B(H,I){if(!H)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return I&&('object'==typeof I||'function'==typeof I)?I:H}function C(H,I){if('function'!=typeof I&&null!==I)throw new TypeError('Super expression must either be null or a function, not '+typeof I);H.prototype=Object.create(I&&I.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(H,I):H.__proto__=I)}Object.defineProperty(y,'__esModule',{value:!0}),y.GraphQLConnection=void 0;var D='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(H){return typeof H}:function(H){return H&&'function'==typeof Symbol&&H.constructor===Symbol&&H!==Symbol.prototype?'symbol':typeof H},E=function(){function H(I,J){for(var L,K=0;K<J.length;K++)L=J[K],L.enumerable=L.enumerable||!1,L.configurable=!0,'value'in L&&(L.writable=!0),Object.defineProperty(I,L.key,L)}return function(I,J,K){return J&&H(I.prototype,J),K&&H(I,K),I}}(),F=z(1),G=y.GraphQLConnection=function(H){function I(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},K=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};A(this,I);var L=B(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,J,K)),M=J.gqlServer;return M.endpoint=M.endpoint||M.connection.uri,L.config.gqlServer=M,L.validateConnection(),L}return C(I,H),E(I,[{key:'validateConnection',value:function(){'object'!==D(this.store)&&this.configError('missing store for holding signinToken from GraphQL server'),'object'!==D(this.keyNames)&&this.configError('missing keyNames object, used to indicate store token keys')}},{key:'setJwtToken',value:function(K){1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.log('setJwtToken not yet implemented on GraphQL server Connection :(',{signinToken:K})}},{key:'defaultHeaders',get:function(){return null}},{key:'authTokenKeyName',get:function(){return this.keyNames.gqlServerTokenKeyName}},{key:'authToken',get:function(){return this.store.getItem(this.authTokenKeyName)||null}}]),I}(F.Configurable)},function(x,y){(function(A,B){x.exports=B()})(this,function(){return function(A){function B(D){if(C[D])return C[D].exports;var E=C[D]={i:D,l:!1,exports:{}};return A[D].call(E.exports,E,E.exports,B),E.l=!0,E.exports}var C={};return B.m=A,B.c=C,B.i=function(D){return D},B.d=function(D,E,F){B.o(D,E)||Object.defineProperty(D,E,{configurable:!1,enumerable:!0,get:F})},B.n=function(D){var E=D&&D.__esModule?function(){return D['default']}:function(){return D};return B.d(E,'a',E),E},B.o=function(D,E){return Object.prototype.hasOwnProperty.call(D,E)},B.p='',B(B.s=4)}([function(A,B){'use strict';Object.defineProperty(B,'__esModule',{value:!0}),B.default={auth0IdTokenKeyName:'auth0Token',gqlServerTokenStorageKey:'graphCoolToken'}},function(A,B,C){'use strict';function D(J,K){if(!(J instanceof K))throw new TypeError('Cannot call a class as a function')}function E(J,K){if(!J)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return K&&('object'==typeof K||'function'==typeof K)?K:J}function F(J,K){if('function'!=typeof K&&null!==K)throw new TypeError('Super expression must either be null or a function, not '+typeof K);J.prototype=Object.create(K&&K.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(J,K):J.__proto__=K)}Object.defineProperty(B,'__esModule',{value:!0}),B.Store=void 0;var G=function(){function J(K,L){for(var M,N=0;N<L.length;N++)M=L[N],M.enumerable=M.enumerable||!1,M.configurable=!0,'value'in M&&(M.writable=!0),Object.defineProperty(K,M.key,M)}return function(K,L,M){return L&&J(K.prototype,L),M&&J(K,M),K}}();B.createStore=function(J){var K=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new I(J,K)};var H=C(2),I=B.Store=function(J){function K(L){var M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};D(this,K);var N=E(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,'Store',M));return N.log('create',{keyNames:L,opts:M}),N.keyNames=L.storage||L,N.storage=M.storage||M.keyStore||window.localStorage,N.auth0IdTokenKeyName=N.keyNames.auth0IdTokenKeyName,N.gqlServerTokenKeyName=N.keyNames.gqlServerTokenKeyName,N}return F(K,J),G(K,[{key:'removeItem',value:function(L){this.storage.removeItem(L)}},{key:'getItem',value:function(L){return this.storage.getItem(L)}},{key:'setItem',value:function(L,M){this.storage.setItem(L,M)}},{key:'validateKeyNames',value:function(){for(var L=this,M=arguments.length,N=Array(M),O=0;O<M;O++)N[O]=arguments[O];N.map(function(P){return L.validateKeyName(P)})}},{key:'validateKeyName',value:function(L){return'string'!=typeof this.keyNames[L]&&this.error('keyNames missing '+L),this}},{key:'error',value:function(L){console.error(L)}},{key:'resetAll',value:function(){this.removeItem(this.auth0TokenKeyName),this.removeItem(this.gqlServerTokenKeyName)}},{key:'getAll',value:function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},{auth0Token:this.getItem(this.auth0IdTokenKeyName),gqlServerToken:this.getItem(this.gqlServerTokenKeyName)}}},{key:'store',value:function(L,M){if(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},0>this.keyNames.indexOf(L))throw Error('keyname mismatch for store: '+L);this.setItem(L,M)}}]),K}(H.Loggable)},function(A,B){'use strict';function C(F,G){if(!(F instanceof G))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(B,'__esModule',{value:!0});var D=function(){function F(G,H){for(var I,J=0;J<H.length;J++)I=H[J],I.enumerable=I.enumerable||!1,I.configurable=!0,'value'in I&&(I.writable=!0),Object.defineProperty(G,I.key,I)}return function(G,H,I){return H&&F(G.prototype,H),I&&F(G,I),G}}(),E=B.Loggable=function(){function F(G){var H=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};C(this,F),this.io=H.io||console,this.logging=H.logging,this.name=G||H.name}return D(F,[{key:'enableLog',value:function(){return this.logging=!0,this}},{key:'disableLog',value:function(){return this.logging=!1,this}},{key:'log',value:function(){if(this.logging){for(var G,H=arguments.length,I=Array(H),J=0;J<H;J++)I[J]=arguments[J];(G=this.io).log.apply(G,[this.name].concat(I))}}},{key:'error',value:function(){if(this.logging){for(var G,H=arguments.length,I=Array(H),J=0;J<H;J++)I[J]=arguments[J];(G=this.io).error.apply(G,[this.name].concat(I))}}}]),F}()},function(A,B,C){'use strict';function D(N,O){if(!(N instanceof O))throw new TypeError('Cannot call a class as a function')}function E(N,O){if(!N)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return O&&('object'==typeof O||'function'==typeof O)?O:N}function F(N,O){if('function'!=typeof O&&null!==O)throw new TypeError('Super expression must either be null or a function, not '+typeof O);N.prototype=Object.create(O&&O.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(N,O):N.__proto__=O)}Object.defineProperty(B,'__esModule',{value:!0}),B.Configurable=void 0;var G='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(N){return typeof N}:function(N){return N&&'function'==typeof Symbol&&N.constructor===Symbol&&N!==Symbol.prototype?'symbol':typeof N},H=function(){function N(O,P){for(var Q,R=0;R<P.length;R++)Q=P[R],Q.enumerable=Q.enumerable||!1,Q.configurable=!0,'value'in Q&&(Q.writable=!0),Object.defineProperty(O,Q.key,Q)}return function(O,P,Q){return P&&N(O.prototype,P),Q&&N(O,Q),O}}(),I=C(0),J=function(N){return N&&N.__esModule?N:{default:N}}(I),K=C(2),L=C(1),M=B.Configurable=function(N){function O(){var P=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};D(this,O);var R=E(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,'Configurable',Q));R.validate(P);var S=P.keyNames,T=P.store,U=P.storage;return R.config=P,R.observers={},R.config=P,R.storage=U,R.keyNames=S||U||J.default,R.store=T||R.defaultCreateStore(R.keyNames,Q),R.tokens=R.store.getAll(),R.tokens=R.store?R.store.getAll():P.tokens,R}return F(O,N),H(O,[{key:'configError',value:function(P){throw this.error(P),Error(P)}},{key:'on',value:function(P,Q){this.log('on',P,Q);var R=this.observers[P]||[];return this.observers[P]=R.concat(Q),this}},{key:'publish',value:function(P,Q){this.log('publish',P,Q);var R=this.observers[P]||[];return R?R.map(function(S){return S(Q)}):this.log('no observers registered for',P),this}},{key:'handleError',value:function(P){throw this.error(P),P}},{key:'defaultCreateStore',value:function(P,Q){return new L.Store(P,Q)}},{key:'validate',value:function(P){if('object'!==('undefined'==typeof P?'undefined':G(P)))throw Error('config must be an object')}}]),O}(K.Loggable)},function(A,B,C){'use strict';Object.defineProperty(B,'__esModule',{value:!0});var D=C(3);Object.defineProperty(B,'Configurable',{enumerable:!0,get:function(){return D.Configurable}});var E=C(0);Object.defineProperty(B,'keyNames',{enumerable:!0,get:function(){return E.keyNames}});var F=C(1);Object.defineProperty(B,'Store',{enumerable:!0,get:function(){return F.Store}}),Object.defineProperty(B,'createStore',{enumerable:!0,get:function(){return F.createStore}})}])})},function(x,y,z){'use strict';Object.defineProperty(y,'__esModule',{value:!0});var A=z(0);Object.defineProperty(y,'GraphQLConnection',{enumerable:!0,get:function(){return A.GraphQLConnection}})}])});
//# sourceMappingURL=bundle.prod.js.map