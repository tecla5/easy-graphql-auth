(function(A,B){'object'==typeof exports&&'object'==typeof module?module.exports=B():'function'==typeof define&&define.amd?define([],B):'object'==typeof exports?exports.easyGqlAuth=B():A.easyGqlAuth=B()})(this,function(){return function(z){function A(C){if(B[C])return B[C].exports;var D=B[C]={i:C,l:!1,exports:{}};return z[C].call(D.exports,D,D.exports,A),D.l=!0,D.exports}var B={};return A.m=z,A.c=B,A.i=function(C){return C},A.d=function(C,D,E){A.o(C,D)||Object.defineProperty(C,D,{configurable:!1,enumerable:!0,get:E})},A.n=function(C){var D=C&&C.__esModule?function(){return C['default']}:function(){return C};return A.d(D,'a',D),D},A.o=function(C,D){return Object.prototype.hasOwnProperty.call(C,D)},A.p='',A(A.s=1)}([function(z,A,B){'use strict';function C(J,K){if(!(J instanceof K))throw new TypeError('Cannot call a class as a function')}function D(J,K){if(!J)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return K&&('object'==typeof K||'function'==typeof K)?K:J}function E(J,K){if('function'!=typeof K&&null!==K)throw new TypeError('Super expression must either be null or a function, not '+typeof K);J.prototype=Object.create(K&&K.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(J,K):J.__proto__=K)}Object.defineProperty(A,'__esModule',{value:!0}),A.GraphQLConnection=void 0;var F='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(J){return typeof J}:function(J){return J&&'function'==typeof Symbol&&J.constructor===Symbol&&J!==Symbol.prototype?'symbol':typeof J},G=function(){function J(K,L){for(var N,M=0;M<L.length;M++)N=L[M],N.enumerable=N.enumerable||!1,N.configurable=!0,'value'in N&&(N.writable=!0),Object.defineProperty(K,N.key,N)}return function(K,L,M){return L&&J(K.prototype,L),M&&J(K,M),K}}(),H=B(2),I=A.GraphQLConnection=function(J){function K(){var L=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};C(this,K);var N=D(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,L,M)),O=L.gqlServer;return O.endpoint=O.endpoint||O.connection.uri,N.config.gqlServer=O,N.validateConfig(),N}return E(K,J),G(K,[{key:'validateConfig',value:function(){'object'!==F(this.store)&&this.configError('missing store for holding signinToken from GraphQL server'),'object'!==F(this.keyNames)&&this.configError('missing keyNames object, used to indicate store token keys')}},{key:'setJwtToken',value:function(M){1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.log('setJwtToken not yet implemented on GraphQL server Connection :(',{signinToken:M})}},{key:'defaultHeaders',get:function(){return null}},{key:'authTokenKeyName',get:function(){return this.keyNames.gqlServerTokenKeyName}},{key:'authToken',get:function(){return this.store.getItem(this.authTokenKeyName)||null}}]),K}(H.Configurable)},function(z,A,B){'use strict';Object.defineProperty(A,'__esModule',{value:!0});var C=B(0);Object.defineProperty(A,'GraphQLConnection',{enumerable:!0,get:function(){return C.GraphQLConnection}})},function(z,A,B){'use strict';(function(C){var D,E,F,G='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(H){return typeof H}:function(H){return H&&'function'==typeof Symbol&&H.constructor===Symbol&&H!==Symbol.prototype?'symbol':typeof H};(function(H,I){'object'==G(A)&&'object'==G(C)?C.exports=I():(E=[],D=I,F='function'==typeof D?D.apply(A,E):D,!(F!==void 0&&(C.exports=F)))})(void 0,function(){return function(H){function I(K){if(J[K])return J[K].exports;var L=J[K]={i:K,l:!1,exports:{}};return H[K].call(L.exports,L,L.exports,I),L.l=!0,L.exports}var J={};return I.m=H,I.c=J,I.i=function(K){return K},I.d=function(K,L,M){I.o(K,L)||Object.defineProperty(K,L,{configurable:!1,enumerable:!0,get:M})},I.n=function(K){var L=K&&K.__esModule?function(){return K['default']}:function(){return K};return I.d(L,'a',L),L},I.o=function(K,L){return Object.prototype.hasOwnProperty.call(K,L)},I.p='',I(I.s=4)}([function(H,I){'use strict';Object.defineProperty(I,'__esModule',{value:!0}),I.default={auth0IdTokenKeyName:'auth0Token',gqlServerTokenStorageKey:'graphCoolToken'},H.exports=I['default']},function(H,I,J){'use strict';function K(Q,R){if(!(Q instanceof R))throw new TypeError('Cannot call a class as a function')}function L(Q,R){if(!Q)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return R&&('object'==('undefined'==typeof R?'undefined':G(R))||'function'==typeof R)?R:Q}function M(Q,R){if('function'!=typeof R&&null!==R)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof R?'undefined':G(R)));Q.prototype=Object.create(R&&R.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(Q,R):Q.__proto__=R)}Object.defineProperty(I,'__esModule',{value:!0}),I.Store=void 0;var N=function(){function Q(R,S){for(var T,U=0;U<S.length;U++)T=S[U],T.enumerable=T.enumerable||!1,T.configurable=!0,'value'in T&&(T.writable=!0),Object.defineProperty(R,T.key,T)}return function(R,S,T){return S&&Q(R.prototype,S),T&&Q(R,T),R}}();I.createStore=function(Q){var R=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new P(Q,R)};var O=J(2),P=I.Store=function(Q){function R(S){var T=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};K(this,R);var U=L(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,'Store',T));return U.log('create',{keyNames:S,opts:T}),U.keyNames=S.storage||S,U.storage=T.storage||T.keyStore||window.localStorage,U.authTokenKeyName=U.keyNames.authTokenKeyName,U.gqlServerTokenKeyName=U.keyNames.gqlServerTokenKeyName,U}return M(R,Q),N(R,[{key:'removeItem',value:function(T){this.storage.removeItem(T)}},{key:'getItem',value:function(T){return this.storage.getItem(T)}},{key:'setItem',value:function(T,U){this.storage.setItem(T,U)}},{key:'validateKeyNames',value:function(){for(var T=this,U=arguments.length,V=Array(U),W=0;W<U;W++)V[W]=arguments[W];V.map(function(X){return T.validateKeyName(X)})}},{key:'validateKeyName',value:function(T){return'string'!=typeof this.keyNames[T]&&this.error('keyNames missing '+T),this}},{key:'error',value:function(T){console.error(T)}},{key:'resetAll',value:function(){this.removeItem(this.authTokenKeyName),this.removeItem(this.gqlServerTokenKeyName)}},{key:'getAll',value:function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},{authToken:this.getItem(this.authTokenKeyName),gqlServerToken:this.getItem(this.gqlServerTokenKeyName)}}},{key:'store',value:function(T,U){if(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},0>this.keyNames.indexOf(T))throw Error('keyname mismatch for store: '+T);this.setItem(T,U)}}]),R}(O.Loggable)},function(H,I){'use strict';function J(M,N){if(!(M instanceof N))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(I,'__esModule',{value:!0});var K=function(){function M(N,O){for(var P,Q=0;Q<O.length;Q++)P=O[Q],P.enumerable=P.enumerable||!1,P.configurable=!0,'value'in P&&(P.writable=!0),Object.defineProperty(N,P.key,P)}return function(N,O,P){return O&&M(N.prototype,O),P&&M(N,P),N}}(),L=I.Loggable=function(){function M(N){var O=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};J(this,M),this.opts=O,this.io=O.io||console,this.logging=O.logging,this.name=N||O.name}return K(M,[{key:'enableLog',value:function(){return this.logging=!0,this}},{key:'disableLog',value:function(){return this.logging=!1,this}},{key:'log',value:function(){if(this.logging){for(var O,P=arguments.length,Q=Array(P),R=0;R<P;R++)Q[R]=arguments[R];(O=this.io).log.apply(O,[this.name].concat(Q))}}},{key:'error',value:function(){if(this.logging){for(var O,P=arguments.length,Q=Array(P),R=0;R<P;R++)Q[R]=arguments[R];(O=this.io).error.apply(O,[this.name].concat(Q))}}}]),M}()},function(H,I,J){'use strict';function K(V,W){if(!(V instanceof W))throw new TypeError('Cannot call a class as a function')}function L(V,W){if(!V)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return W&&('object'==('undefined'==typeof W?'undefined':G(W))||'function'==typeof W)?W:V}function M(V,W){if('function'!=typeof W&&null!==W)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof W?'undefined':G(W)));V.prototype=Object.create(W&&W.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(V,W):V.__proto__=W)}function N(V){return'function'==typeof V}Object.defineProperty(I,'__esModule',{value:!0}),I.Configurable=void 0;var O='function'==typeof Symbol&&'symbol'==G(Symbol.iterator)?function(V){return'undefined'==typeof V?'undefined':G(V)}:function(V){return V&&'function'==typeof Symbol&&V.constructor===Symbol&&V!==Symbol.prototype?'symbol':'undefined'==typeof V?'undefined':G(V)},P=function(){function V(W,X){for(var Y,Z=0;Z<X.length;Z++)Y=X[Z],Y.enumerable=Y.enumerable||!1,Y.configurable=!0,'value'in Y&&(Y.writable=!0),Object.defineProperty(W,Y.key,Y)}return function(W,X,Y){return X&&V(W.prototype,X),Y&&V(W,Y),W}}(),Q=J(0),R=function(V){return V&&V.__esModule?V:{default:V}}(Q),S=J(2),T=J(1),U=I.Configurable=function(V){function W(){var X=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Y=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};K(this,W);var Z=L(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,'Configurable',Y));return Z.validate(X),Z.log('configuring with',{config:X,opts:Y}),Z.opts=Z.opts||Y,Z.config=X,Z.configure(),Z}return M(W,V),P(W,[{key:'configure',value:function(){return this.log('configure'),this.observers={},this.configureStorage(),this.retrieveTokens(),this}},{key:'configureStorage',value:function(){return this.log('configureStorage'),this.storage=this.config.storage,this.keyNames=this.config.keyNames||this.storage||R.default,this.store=this.config.store||this.createStore(),this}},{key:'retrieveTokens',value:function(){this.log('retrieveTokens',{store:this.store}),this.tokens=this.store?this.store.getAll():{}}},{key:'extractProperty',value:function(Y,Z,$){var _=Y.find(function(ba){return(ba||{})[Z]}),aa=_[Z];return $&&aa&&(this[Z]=aa),aa}},{key:'extractProperties',value:function(Y){for(var Z=arguments.length,$=Array(1<Z?Z-1:0),_=1;_<Z;_++)$[_-1]=arguments[_];return $.map(function(aa){return extractProperty(Y,aa,!0)})}},{key:'configError',value:function(Y){throw this.error(Y),Error(Y)}},{key:'on',value:function(Y,Z){this.log('on',Y,Z);var $=this.observers[Y]||[];return this.observers[Y]=$.concat(Z),this}},{key:'publish',value:function(Y,Z){this.log('publish',Y,Z);var $=this.observers[Y]||[];return $?$.map(function(_){return _(Z)}):this.log('no observers registered for',Y),this}},{key:'handleError',value:function(Y){throw this.error(Y),Y}},{key:'createStore',value:function(Y){var Z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},$=Z,_=$.createStore;return Y=Y||this.keyNames,Z=Z||this.opts,this.log('createStore',{keyNames:Y,opts:Z}),_=N(_)?_:this.defaultCreateStore,this.log('create with',{createStore:_}),_(Y,Z)}},{key:'defaultCreateStore',value:function(Y,Z){return new T.Store(Y,Z)}},{key:'validate',value:function(Y){if('object'!==('undefined'==typeof Y?'undefined':O(Y)))throw Error('config must be an object')}}]),W}(S.Loggable)},function(H,I,J){'use strict';Object.defineProperty(I,'__esModule',{value:!0});var K=J(3);Object.defineProperty(I,'Configurable',{enumerable:!0,get:function(){return K.Configurable}});var L=J(0);Object.defineProperty(I,'keyNames',{enumerable:!0,get:function(){return L.keyNames}});var M=J(1);Object.defineProperty(I,'Store',{enumerable:!0,get:function(){return M.Store}}),Object.defineProperty(I,'createStore',{enumerable:!0,get:function(){return M.createStore}})}])})}).call(A,B(3)(z))},function(z){z.exports=function(B){return B.webpackPolyfill||(B.deprecate=function(){},B.paths=[],!B.children&&(B.children=[]),Object.defineProperty(B,'loaded',{enumerable:!0,get:function(){return B.l}}),Object.defineProperty(B,'id',{enumerable:!0,get:function(){return B.i}}),B.webpackPolyfill=1),B}}])});
//# sourceMappingURL=bundle.prod.js.map