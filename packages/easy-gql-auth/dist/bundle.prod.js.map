{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 47d5dde72206aa94a6ad","webpack:///../token-foundation/dist/bundle.prod.js","webpack:///./src/auth.js","webpack:///./src/connection.js","webpack:///./src/index.js","webpack:///(webpack)/buildin/module.js"],"names":[],"mappings":"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","file":"bundle.prod.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"easyGqlAuth\"] = factory();\n\telse\n\t\troot[\"easyGqlAuth\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 47d5dde72206aa94a6ad","(function(b,c){'object'==typeof exports&&'object'==typeof module?module.exports=c():'function'==typeof define&&define.amd?define([],c):'object'==typeof exports?exports.tokenFoundation=c():b.tokenFoundation=c()})(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(d){return d},b.d=function(d,e,f){b.o(d,e)||Object.defineProperty(d,e,{configurable:!1,enumerable:!0,get:f})},b.n=function(d){var e=d&&d.__esModule?function(){return d['default']}:function(){return d};return b.d(e,'a',e),e},b.o=function(d,e){return Object.prototype.hasOwnProperty.call(d,e)},b.p='',b(b.s=3)}([function(a,b){'use strict';Object.defineProperty(b,'__esModule',{value:!0}),b.default={auth0IdTokenKeyName:'auth0Token',gqlServerTokenStorageKey:'graphCoolToken'}},function(a,b){'use strict';function d(h,j){if(!(h instanceof j))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(b,'__esModule',{value:!0});var f=function(){function h(j,k){for(var m,l=0;l<k.length;l++)m=k[l],m.enumerable=m.enumerable||!1,m.configurable=!0,'value'in m&&(m.writable=!0),Object.defineProperty(j,m.key,m)}return function(j,k,l){return k&&h(j.prototype,k),l&&h(j,l),j}}();b.createStore=function(h){var j=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return new g(h,j)};var g=b.Store=function(){function h(j){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};d(this,h),this.keyNames=j.storage||j,this.storage=k.storage||k.keyStore||localStorage,this.auth0IdTokenKeyName=this.keyNames.auth0IdTokenKeyName,this.gqlServerTokenKeyName=this.keyNames.gqlServerTokenKeyName}return f(h,[{key:'removeItem',value:function(k){this.storage.removeItem(k)}},{key:'getItem',value:function(k){return this.storage.getItem(k)}},{key:'setItem',value:function(k,l){this.storage.setItem(k,l)}},{key:'validateKeyNames',value:function(){for(var k=this,l=arguments.length,m=Array(l),n=0;n<l;n++)m[n]=arguments[n];m.map(function(o){return k.validateKeyName(o)})}},{key:'validateKeyName',value:function(k){return'string'!=typeof this.keyNames[k]&&this.error('keyNames missing '+k),this}},{key:'error',value:function(k){console.error(k)}},{key:'resetAll',value:function(){this.removeItem(this.auth0TokenKeyName),this.removeItem(this.gqlServerTokenKeyName)}},{key:'getAll',value:function(){0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{auth0Token:this.getItem(this.auth0IdTokenKeyName),gqlServerToken:this.getItem(this.gqlServerTokenKeyName)}}},{key:'store',value:function(k,l){2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(0>this.keyNames.indexOf(k))throw Error('keyname mismatch for store: '+k);this.setItem(k,l)}}]),h}()},function(a,b,c){'use strict';function e(m,n){if(!(m instanceof n))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(b,'__esModule',{value:!0}),b.Configurable=void 0;var f='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&'function'==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?'symbol':typeof m},g=function(){function m(n,o){for(var q,p=0;p<o.length;p++)q=o[p],q.enumerable=q.enumerable||!1,q.configurable=!0,'value'in q&&(q.writable=!0),Object.defineProperty(n,q.key,q)}return function(n,o,p){return o&&m(n.prototype,o),p&&m(n,p),n}}(),h=c(0),j=function(m){return m&&m.__esModule?m:{default:m}}(h),k=c(1),l=b.Configurable=function(){function m(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e(this,m),this.validate(n);var p=n.keyNames,q=n.store,r=n.storage;this.config=n,this.io=o.io||console,this.logging=o.logging,this.observers={},this.config=n,this.storage=r,this.keyNames=p||r||j.default,this.store=q||this.defaultCreateStore(this.keyNames,o),this.tokens=this.store.getAll(),this.tokens=this.store?this.store.getAll():n.tokens}return g(m,[{key:'on',value:function(o,p){this.log('on',o,p);var q=this.observers[o]||[];return this.observers[o]=q.concat(p),this}},{key:'publish',value:function(o,p){this.log('publish',o,p);var q=this.observers[o]||[];return q?q.map(function(r){return r(p)}):this.log('no observers registered for',o),this}},{key:'handleError',value:function(o){throw this.error(o),o}},{key:'enableLog',value:function(){return this.logging=!0,this}},{key:'disableLog',value:function(){return this.logging=!1,this}},{key:'log',value:function(){if(this.logging){for(var o,p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];(o=this.io).log.apply(o,['Lock'].concat(q))}}},{key:'error',value:function(){if(this.logging){for(var o,p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];(o=this.io).error.apply(o,['Lock'].concat(q))}}},{key:'defaultCreateStore',value:function(o,p){return new k.Store(o,p)}},{key:'validate',value:function(o){if('object'!==('undefined'==typeof o?'undefined':f(o)))throw Error('config must be an object')}}]),m}()},function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var d=c(2);Object.defineProperty(b,'Configurable',{enumerable:!0,get:function(){return d.Configurable}});var e=c(0);Object.defineProperty(b,'keyNames',{enumerable:!0,get:function(){return e.keyNames}});var f=c(1);Object.defineProperty(b,'Store',{enumerable:!0,get:function(){return f.Store}}),Object.defineProperty(b,'createStore',{enumerable:!0,get:function(){return f.createStore}})}])});\n//# sourceMappingURL=bundle.prod.js.map\n\n\n// WEBPACK FOOTER //\n// ../token-foundation/dist/bundle.prod.js","import {\n  Configurable\n} from '@tecla5/token-foundation'\n\nexport class GraphQLAuth extends Configurable {\n  constructor(config) {\n    super(config)\n  }\n\n  extractSignedInUserToken(signinResult) {\n    return signinResult.data.signinUser.token\n  }\n\n  get gqlServerTokenKeyName() {\n    return this.store.gqlServerTokenKeyName\n  }\n\n  setGraphQLServerToken(signinToken) {\n    // set graphcool token in localstorage\n    this.store.setItem(this.gqlServerTokenKeyName, signinToken)\n    return this\n  }\n\n  async signin(data) {\n    let {\n      auth0Token,\n      profile\n    } = data\n    this.log('Signing into GraphQL server');\n    let created = await this.doCreateUser(data)\n    const signinResult = await this.doSigninUser(data)\n    const signinToken = this.extractSignedInUserToken(signinResult)\n    this.setGraphQLServerToken(signinToken)\n  }\n\n  handleQueryError(err) {\n    if (!err.graphQLErrors ||\n      err.graphQLErrors[0].code !== errorCode.USER_ALREADY_EXISTS\n    ) {\n      this.handleError(err)\n    }\n  }\n\n  buildUserData(data) {\n    let {\n      auth0Token,\n      profile\n    } = data\n    return {\n      variables: {\n        authToken: auth0Token,\n        name: profile.name\n      }\n    }\n  }\n\n  async doCreateUser(data) {\n    let {\n      auth0Token,\n      profile\n    } = data\n    // create user if necessary\n    try {\n      this.log('Create user', name);\n      let userData = this.buildUserData(data)\n      if (this.queries.createUser) {\n        await this.queries.createUser(userData)\n      } else {\n        this.log('missing createUser query, faking it')\n        await this.fakeCreateUser(userData)\n      }\n    } catch (err) {\n      this.handleQueryError(err)\n    }\n  }\n\n  // TODO: simulate GraphCool query mutation result?\n  fakeCreateUser(userData) {\n    return userData\n  }\n\n  buildSigninUserData({\n    auth0Token,\n    profile\n  }) {\n    return {\n      variables: {\n        authToken: auth0Token\n      }\n    }\n  }\n\n  // sign in user\n  async doSigninUser(data) {\n    let {\n      auth0Token,\n      profile\n    } = data\n    this.log('signin user', data);\n    if (!this.queries.signinUser) {\n      return this.fakeSigninUser(profile)\n    }\n    let userData = this.buildSigninUserData(data)\n    return await this.queries.signinUser(userData)\n  }\n\n  fakeSigninUser(profile) {\n    this.log('returning fake signedinUser')\n    return {\n      data: {\n        signinUser: {\n          token: '1234'\n        }\n      }\n    }\n  }\n}\n\nexport function createGraphQLAuth(config) {\n  new GraphQLAuth(config)\n}\n\n\n// WEBPACK FOOTER //\n// ./src/auth.js","import {\n  Configurable\n} from '@tecla5/token-foundation'\n\nexport class GraphQLConnection extends Configurable {\n  constructor(config = {}) {\n    super(config)\n    this.connection = config.gqlServer.connection\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/connection.js","export {\n  GraphQLAuth\n}\nfrom './auth'\n\nexport {\n  GraphQLConnection\n}\nfrom './connection'\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}