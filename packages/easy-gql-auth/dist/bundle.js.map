{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 9e2e78c33e5c58e892dd","webpack:///../token-foundation/dist/bundle.prod.js","webpack:///./src/auth.js","webpack:///./src/connection.js","webpack:///./src/index.js","webpack:///(webpack)/buildin/module.js"],"names":["b","c","exports","module","tokenFoundation","a","d","e","i","l","call","m","f","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","prototype","hasOwnProperty","p","s","value","default","auth0IdTokenKeyName","gqlServerTokenStorageKey","h","j","TypeError","k","length","writable","key","createStore","arguments","g","Store","keyNames","validateKeyName","storage","localStorage","gqlServerTokenKeyName","removeItem","getItem","setItem","error","console","auth0TokenKeyName","auth0Token","gqlServerToken","indexOf","Error","Configurable","Symbol","iterator","constructor","q","validate","store","r","config","io","logging","observers","defaultCreateStore","tokens","getAll","log","concat","map","Array","apply","createGraphQLServerAuth","GraphQLAuth","signinResult","data","signinUser","token","signinToken","profile","doCreateUser","created","doSigninUser","extractSignedInUserToken","setGraphQLServerToken","err","graphQLErrors","code","errorCode","USER_ALREADY_EXISTS","handleError","variables","authToken","name","userData","buildUserData","queries","createUser","fakeCreateUser","handleQueryError","fakeSigninUser","buildSigninUserData","GraphQLServerAuth","GraphQLConnection","connection","gqlServer"],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"easyGqlAuth\"] = factory();\n\telse\n\t\troot[\"easyGqlAuth\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9e2e78c33e5c58e892dd","(function(b,c){'object'==typeof exports&&'object'==typeof module?module.exports=c():'function'==typeof define&&define.amd?define([],c):'object'==typeof exports?exports.tokenFoundation=c():b.tokenFoundation=c()})(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(d){return d},b.d=function(d,e,f){b.o(d,e)||Object.defineProperty(d,e,{configurable:!1,enumerable:!0,get:f})},b.n=function(d){var e=d&&d.__esModule?function(){return d['default']}:function(){return d};return b.d(e,'a',e),e},b.o=function(d,e){return Object.prototype.hasOwnProperty.call(d,e)},b.p='',b(b.s=3)}([function(a,b){'use strict';Object.defineProperty(b,'__esModule',{value:!0}),b.default={auth0IdTokenKeyName:'auth0Token',gqlServerTokenStorageKey:'graphCoolToken'}},function(a,b){'use strict';function d(h,j){if(!(h instanceof j))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(b,'__esModule',{value:!0});var f=function(){function h(j,k){for(var m,l=0;l<k.length;l++)m=k[l],m.enumerable=m.enumerable||!1,m.configurable=!0,'value'in m&&(m.writable=!0),Object.defineProperty(j,m.key,m)}return function(j,k,l){return k&&h(j.prototype,k),l&&h(j,l),j}}();b.createStore=function(h){var j=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return new g(h,j)};var g=b.Store=function(){function h(j){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};d(this,h),this.keyNames=j,this.validateKeyName('auth0IdTokenKeyName').validateKeyName('gqlServerTokenKeyName'),this.storage=k.storage||localStorage,this.auth0IdTokenKeyName=this.keyNames.auth0IdTokenKeyName,this.gqlServerTokenKeyName=this.keyNames.gqlServerTokenKeyName}return f(h,[{key:'removeItem',value:function(k){this.storage.removeItem(k)}},{key:'getItem',value:function(k){return this.storage.getItem(k)}},{key:'setItem',value:function(k,l){this.storage.setItem(k,l)}},{key:'validateKeyName',value:function(k){return'string'!=typeof this.keyNames[k]&&this.error('keyNames missing '+k),this}},{key:'error',value:function(k){console.error(k)}},{key:'resetAll',value:function(){this.removeItem(this.auth0TokenKeyName),this.removeItem(this.gqlServerTokenKeyName)}},{key:'getAll',value:function(){0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{auth0Token:this.getItem(this.auth0IdTokenKeyName),gqlServerToken:this.getItem(this.gqlServerTokenKeyName)}}},{key:'store',value:function(k,l){2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(0>this.keyNames.indexOf(k))throw Error('keyname mismatch for store: '+k);this.setItem(k,l)}}]),h}()},function(a,b,c){'use strict';function e(m,n){if(!(m instanceof n))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(b,'__esModule',{value:!0}),b.Configurable=void 0;var f='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&'function'==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?'symbol':typeof m},g=function(){function m(n,o){for(var q,p=0;p<o.length;p++)q=o[p],q.enumerable=q.enumerable||!1,q.configurable=!0,'value'in q&&(q.writable=!0),Object.defineProperty(n,q.key,q)}return function(n,o,p){return o&&m(n.prototype,o),p&&m(n,p),n}}(),h=c(0),j=function(m){return m&&m.__esModule?m:{default:m}}(h),k=c(1),l=b.Configurable=function(){function m(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e(this,m),this.validate(n);var p=n.keyNames,q=n.store,r=n.storage;this.config=n,this.io=o.io||console,this.logging=o.logging,this.observers={},this.config=n,this.storage=r,this.keyNames=p||r||j.default,this.store=q||this.defaultCreateStore(this.keyNames,o),this.tokens=this.store.getAll(),this.tokens=this.store?this.store.getAll():n.tokens}return g(m,[{key:'on',value:function(o,p){this.log('on',o,p);var q=this.observers[o]||[];return this.observers[o]=q.concat(p),this}},{key:'publish',value:function(o,p){this.log('publish',o,p);var q=this.observers[o]||[];return q?q.map(function(r){return r(p)}):this.log('no observers registered for',o),this}},{key:'handleError',value:function(o){throw this.error(o),o}},{key:'enableLog',value:function(){return this.logging=!0,this}},{key:'disableLog',value:function(){return this.logging=!1,this}},{key:'log',value:function(){if(this.logging){for(var o,p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];(o=this.io).log.apply(o,['Lock'].concat(q))}}},{key:'error',value:function(){if(this.logging){for(var o,p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];(o=this.io).error.apply(o,['Lock'].concat(q))}}},{key:'defaultCreateStore',value:function(o,p){return new k.Store(o,p)}},{key:'validate',value:function(o){if('object'!==('undefined'==typeof o?'undefined':f(o)))throw Error('config must be an object')}}]),m}()},function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var d=c(2);Object.defineProperty(b,'Configurable',{enumerable:!0,get:function(){return d.Configurable}});var e=c(0);Object.defineProperty(b,'keyNames',{enumerable:!0,get:function(){return e.keyNames}});var f=c(1);Object.defineProperty(b,'Store',{enumerable:!0,get:function(){return f.Store}}),Object.defineProperty(b,'createStore',{enumerable:!0,get:function(){return f.createStore}})}])});\n//# sourceMappingURL=bundle.prod.js.map\n\n\n// WEBPACK FOOTER //\n// ../token-foundation/dist/bundle.prod.js","import {\n  Configurable\n} from '@tecla5/token-foundation'\n\nexport class GraphQLAuth extends Configurable {\n  constructor(config) {\n    super(config)\n  }\n\n  extractSignedInUserToken(signinResult) {\n    return signinResult.data.signinUser.token\n  }\n\n  get gqlServerTokenKeyName() {\n    return this.store.gqlServerTokenKeyName\n  }\n\n  setGraphQLServerToken(signinToken) {\n    // set graphcool token in localstorage\n    this.store.setItem(this.gqlServerTokenKeyName, signinToken)\n    return this\n  }\n\n  async signin(data) {\n    let {\n      auth0Token,\n      profile\n    } = data\n    this.log('Signing into GraphQL server');\n    let created = await this.doCreateUser(data)\n    const signinResult = await this.doSigninUser(data)\n    const signinToken = this.extractSignedInUserToken(signinResult)\n    this.setGraphQLServerToken(signinToken)\n  }\n\n  handleQueryError(err) {\n    if (!err.graphQLErrors ||\n      err.graphQLErrors[0].code !== errorCode.USER_ALREADY_EXISTS\n    ) {\n      this.handleError(err)\n    }\n  }\n\n  buildUserData(data) {\n    let {\n      auth0Token,\n      profile\n    } = data\n    return {\n      variables: {\n        authToken: auth0Token,\n        name: profile.name\n      }\n    }\n  }\n\n  async doCreateUser(data) {\n    let {\n      auth0Token,\n      profile\n    } = data\n    // create user if necessary\n    try {\n      this.log('Create user', name);\n      let userData = this.buildUserData(data)\n      if (this.queries.createUser) {\n        await this.queries.createUser(userData)\n      } else {\n        this.log('missing createUser query, faking it')\n        await this.fakeCreateUser(userData)\n      }\n    } catch (err) {\n      this.handleQueryError(err)\n    }\n  }\n\n  // TODO: simulate GraphCool query mutation result?\n  fakeCreateUser(userData) {\n    return userData\n  }\n\n  buildSigninUserData({\n    auth0Token,\n    profile\n  }) {\n    return {\n      variables: {\n        authToken: auth0Token\n      }\n    }\n  }\n\n  // sign in user\n  async doSigninUser(data) {\n    let {\n      auth0Token,\n      profile\n    } = data\n    this.log('signin user', data);\n    if (!this.queries.signinUser) {\n      return this.fakeSigninUser(profile)\n    }\n    let userData = this.buildSigninUserData(data)\n    return await this.queries.signinUser(userData)\n  }\n\n  fakeSigninUser(profile) {\n    this.log('returning fake signedinUser')\n    return {\n      data: {\n        signinUser: {\n          token: '1234'\n        }\n      }\n    }\n  }\n}\n\nexport function createGraphQLServerAuth(config) {\n  new GraphQLServerAuth(config)\n}\n\n\n// WEBPACK FOOTER //\n// ./src/auth.js","import {\n  Configurable\n} from '@tecla5/token-foundation'\n\nexport class GraphQLConnection extends Configurable {\n  constructor(config = {}) {\n    super(config)\n    this.connection = config.gqlServer.connection\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/connection.js","export {\n  GraphQLAuth\n}\nfrom './auth'\n\nexport {\n  GraphQLConnection\n}\nfrom './connection'\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}