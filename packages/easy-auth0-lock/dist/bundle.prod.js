var _Mathfloor=Math.floor,_Mathpow=Math.pow,_StringfromCharCode=String.fromCharCode,_Mathmin=Math.min;(function(o,r){'object'==typeof exports&&'object'==typeof module?module.exports=r():'function'==typeof define&&define.amd?define([],r):'object'==typeof exports?exports.easyAuth0Lock=r():o.easyAuth0Lock=r()})(this,function(){return function(t){function o(u){if(r[u])return r[u].exports;var f=r[u]={i:u,l:!1,exports:{}};return t[u].call(f.exports,f,f.exports,o),f.l=!0,f.exports}var r={};return o.m=t,o.c=r,o.i=function(u){return u},o.d=function(u,f,p){o.o(u,f)||Object.defineProperty(u,f,{configurable:!1,enumerable:!0,get:p})},o.n=function(u){var f=u&&u.__esModule?function(){return u['default']}:function(){return u};return o.d(f,'a',f),f},o.o=function(u,f){return Object.prototype.hasOwnProperty.call(u,f)},o.p='',o(o.s=6)}([function(t,o,r){'use strict';Object.defineProperty(o,'__esModule',{value:!0});var u=r(7);Object.defineProperty(o,'Configurable',{enumerable:!0,get:function(){return u.Configurable}});var f=r(1);Object.defineProperty(o,'keyNames',{enumerable:!0,get:function(){return f.keyNames}});var p=r(4);Object.defineProperty(o,'Store',{enumerable:!0,get:function(){return p.Store}}),Object.defineProperty(o,'createStore',{enumerable:!0,get:function(){return p.createStore}})},function(t,o){'use strict';Object.defineProperty(o,'__esModule',{value:!0}),o.default={authTokenKeyName:'auth0Token',gqlServerTokenKeyName:'gqlServerAuthToken',serverTokenKeyName:'serverAuthToken'},t.exports=o['default']},function(t,o,r){'use strict';function f(I){return function(){var N=I.apply(this,arguments);return new Promise(function(B,O){function U(Y,K){try{var D=N[Y](K),M=D.value}catch(F){return void O(F)}return D.done?void B(M):Promise.resolve(M).then(function(F){U('next',F)},function(F){U('throw',F)})}return U('next')})}}function p(I,N){if(!(I instanceof N))throw new TypeError('Cannot call a class as a function')}function h(I,N){if(!I)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return N&&('object'==typeof N||'function'==typeof N)?N:I}function k(I,N){if('function'!=typeof N&&null!==N)throw new TypeError('Super expression must either be null or a function, not '+typeof N);I.prototype=Object.create(N&&N.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(I,N):I.__proto__=N)}function v(I){return'object'===('undefined'==typeof I?'undefined':S(I))&&null!==I}Object.defineProperty(o,'__esModule',{value:!0}),o.Lock=void 0;var P=function(){function I(N,B){for(var U,O=0;O<B.length;O++)U=B[O],U.enumerable=U.enumerable||!1,U.configurable=!0,'value'in U&&(U.writable=!0),Object.defineProperty(N,U.key,U)}return function(N,B,O){return B&&I(N.prototype,B),O&&I(N,O),N}}(),A=function I(N,B,O){null===N&&(N=Function.prototype);var U=Object.getOwnPropertyDescriptor(N,B);if(U===void 0){var Y=Object.getPrototypeOf(N);return null===Y?void 0:I(Y,B,O)}if('value'in U)return U.value;var K=U.get;return void 0===K?void 0:K.call(O)},S='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(I){return typeof I}:function(I){return I&&'function'==typeof Symbol&&I.constructor===Symbol&&I!==Symbol.prototype?'symbol':typeof I};o.createLock=function(I,N){return new R(I,N)};var T=r(0),E=r(12),C=function(I){return I&&I.__esModule?I:{default:I}}(E),R=o.Lock=function(I){function N(){var B=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},O=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};p(this,N);var U=h(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,B,O));return U.configure(),U.postConfig(),U.attemptLogin(),U}return k(N,I),P(N,[{key:'attemptLogin',value:function(){this.onHashParsed()||this.attemptStorageLogin()}},{key:'configure',value:function(O){if(!this.configured.Lock||O){A(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),'configure',this).call(this);var U=this.config,Y=this.opts,K=[U,Y,Y.lock];this.extractProperties(K,'Auth0Lock','createLockUi'),this.retrieveProfileMethod=this.config.retrieveProfileMethod||this.defaultRetrieveProfileMethod;var D=this.extractProps(!1,K,'theme','logo','title','dict'),M=D.theme,F=D.logo,q=D.dict,z=D.title;return this.lockConfig=U.lock||Y.lock||{},q=q||{},M=M||{},q.title=z||q.title||this.defaultTitle,M.dict=q||{},M.logo=F||M.logo,this.dict=q||{},this.theme=M||{},this.setupLockConfig(),this.auth0Config=this.extractAuth0config(U),this.configured.Lock=!0,this}}},{key:'createLock',value:function(){this.auth0Config||this.configError('missing Auth0 configuration'),this.lock=this.createLockUi(this.auth0Config,this.opts)}},{key:'attemptStorageLogin',value:function(){this.auth0Token?this.receiveProfile(this.auth0Token):this.noTokenInStorage()}},{key:'noTokenInStorage',value:function(){this.log('no token found in local storage')}},{key:'postConfig',value:function(){return this.validateConfig(),this.createLock(),this}},{key:'validateConfig',value:function(O){if(!this.validated.Lock||O)return A(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),'validateConfig',this).call(this,O),this.auth0Config||this.configError('missing auth0Config'),this.Auth0Lock||this.configError('missing Auth0Lock'),this.createLockUi||this.configError('missing createLockUi'),this.validated.Lock=!0,this}},{key:'extractAuth0config',value:function(O){return O=O||this.config,v(O.auth)?O.auth.auth0||O.auth||{}:O.auth0||{}}},{key:'setupLockConfig',value:function(){return this.lockConfig=(0,C.default)(this.defaultLockConfig,this.lockConfig),this}},{key:'createLockUi',value:function(){var O=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},U=arguments[1];return this.log('create lock',O,U),new this.Auth0Lock(O.clientId,O.domain,U)}},{key:'onHashParsed',value:function(){var O=this;return!this.hashWasParsed&&(this.lock.on('hash_parsed',function(U){O.hashWasParsed=!0,O.log('hash parsed',{authResult:U}),null==U?null==O.auth0Token&&O.showLock():(O.log('setting auth token',{authResult:U}),U.idToken?(O.auth0IDToken=U.idToken,O.log('success',{authResult:U,auth0IDToken:auth0IDToken})):O.error('authResult missing idToken'))}),this)}},{key:'logout',value:function(){return this.log('logout'),this.resetTokens(),this.resetStore(),this.loggedOut(),this}},{key:'loggedOut',value:function(){return this.log('logged out'),this.notifySuccess('logout',!0),this.notifySuccess('signout',!0),this}},{key:'resetTokens',value:function(){return this.log('resetTokens'),this.tokens={auth0Token:null},this.notifySuccess('tokens:reset',!0),this}},{key:'resetStore',value:function(){return this.log('resetStorage'),this.store.resetAll(),this.notifySuccess('store:reset',!0),this}},{key:'showLock',value:function(){var O=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},U=O||this.defaultLockConfig;return U=Object.assign({},U,this.lockConfig||{}),this.log('showLock',U),this.lock.show(U),this}},{key:'handleProfileError',value:function(O){this.error(O)}},{key:'handleProfile',value:function(O){var U=O.authResult,Y=O.profile;this.log('handleProfile',O);var K=this.extractAuthToken(U);this.onAuth0Login({auth0Token:K,profile:Y})}},{key:'subscribeAuthenticated',value:function(O){return this.log('config'),this.lock.on('authenticated',O||this.onAuthenticated.bind(this)),this}},{key:'extractAuthToken',value:function(O){return O.accessToken}},{key:'onAuthenticated',value:function(O){this.log('onAuthenticated',O);var U=this.extractAuthToken(O);this.receiveProfile(U,O)}},{key:'receiveProfile',value:function(O,U){this.lock[this.retrieveProfileMethod](O,this.createProfileReceivedCb(U).bind(this))}},{key:'createProfileReceivedCb',value:function(O){var U=this;return function(Y,K){Y?U.handleProfileError(Y):U.handleProfile({authResult:O,profile:K})}}},{key:'onAuth0Login',value:function(){var O=f(regeneratorRuntime.mark(function U(Y){var K,D,M;return regeneratorRuntime.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return K=Y.auth0Token,D=Y.profile,this.log('onAuth0Login',Y),this.setAuth0Token(K),q.prev=3,q.next=6,this.serverSignin(Y);case 6:this.signedIn(Y),q.next=13;break;case 9:q.prev=9,q.t0=q['catch'](3),M=Object.assign(Y,{err:q.t0}),this.signedInFailure(Y);case 13:case'end':return q.stop();}},U,this,[[3,9]])}));return function(){return O.apply(this,arguments)}}()},{key:'serverSignin',value:function(){var O=f(regeneratorRuntime.mark(function U(Y){return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:this.log('serverSignin: not implemented',Y);case 1:case'end':return D.stop();}},U,this)}));return function(){return O.apply(this,arguments)}}()},{key:'signedInFailure',value:function(O){var U=O.err,Y=O.profile;this.log('signedInFailure',U),this.handleSigninError(O)}},{key:'signedIn',value:function(O){this.log('signedIn',O),this.notifySuccess('signin',O),this.notifySuccess('login',O)}},{key:'handleSigninError',value:function(O){this.notifyFailure('signin',O)}},{key:'defaultTitle',get:function(){return'Sign in'}},{key:'defaultRetrieveProfileMethod',get:function(){return'getUserInfo'}},{key:'defaultTheme',get:function(){return{}}},{key:'defaultLockConfig',get:function(){return{theme:this.defaultTheme||{}},{languageDictionary:this.dict||{}}}},{key:'authTokenKeyName',get:function(){var O=this.store.authTokenKeyName;return O||this.handleError('store missing authTokenKeyName',this.store),O}},{key:'auth0Token',get:function(){return this.store.getItem(this.authTokenKeyName)},set:function(O){return this.store.setItem(this.authTokenKeyName,O),this}}]),N}(T.Configurable)},function(t,o,r){'use strict';function u(A,S){if(!(A instanceof S))throw new TypeError('Cannot call a class as a function')}function f(A,S){if(!A)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return S&&('object'==typeof S||'function'==typeof S)?S:A}function p(A,S){if('function'!=typeof S&&null!==S)throw new TypeError('Super expression must either be null or a function, not '+typeof S);A.prototype=Object.create(S&&S.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(A,S):A.__proto__=S)}Object.defineProperty(o,'__esModule',{value:!0}),o.Notifiable=void 0;var h='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&'function'==typeof Symbol&&A.constructor===Symbol&&A!==Symbol.prototype?'symbol':typeof A},k=function(){function A(S,T){for(var C,E=0;E<T.length;E++)C=T[E],C.enumerable=C.enumerable||!1,C.configurable=!0,'value'in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}return function(S,T,E){return T&&A(S.prototype,T),E&&A(S,E),S}}(),v=function A(S,T,E){null===S&&(S=Function.prototype);var C=Object.getOwnPropertyDescriptor(S,T);if(C===void 0){var w=Object.getPrototypeOf(S);return null===w?void 0:A(w,T,E)}if('value'in C)return C.value;var R=C.get;return void 0===R?void 0:R.call(E)},_=r(9),P=o.Notifiable=function(A){function S(T,E){u(this,S);var C=f(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,T,E));return C.notifyLog=E.notifyLog,C.topic=E.topic||C.defaultTopic,C.notifyError=C.notifyFailure.bind(C),C.observers={},C}return p(S,A),k(S,[{key:'log',value:function(E,C){!1===this.notifyLog||v(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),'log',this).call(this,E,C)}},{key:'notify',value:function(E,C){var w=this._criteria(E,C);this.publish(w,C)}},{key:'_criteria',value:function(E,C){var w=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Object.assign({},{topic:this.topic,event:E,data:C},w)}},{key:'notifySuccess',value:function(E,C){var w=this._criteria(E,C,{status:'success'});this.publish(w,C)}},{key:'notifyFailure',value:function(E,C){var w=this._criteria(E,C,{status:'failure'});this.publish(w,C)}},{key:'onCriteria',value:function(E,C){this.log('onCriteria',E,C);var w=E.topic,R=E.event,I=E.status;w=w||this.topic,this.observers[w]=this.observers[w]||{},this.observers[w][R]=this.observers[w][R]||{};var N=this.observers[w][R];return I?(N[I]=this.observers[w][R][I]||[],N[I]=N[I].concat(C)):(N.observers=N.observers||[],N.observers=N.observers.concat(C)),this}},{key:'onStatus',value:function(E,C,w){var R;return R='object'===('undefined'==typeof E?'undefined':h(E))?E:{event:E},R.status=C,this.onCriteria(R,w)}},{key:'onSuccess',value:function(E,C){return this.onStatus(E,'success',C)}},{key:'onFailure',value:function(E,C){return this.onStatus(E,'failure',C)}},{key:'on',value:function(E,C){if(this.log('on',E,C),'object'===('undefined'==typeof E?'undefined':h(E))){return this.onCriteria(E,C)}var R=this.observers[E]||[];return this.observers[E]=R.concat(C),this}},{key:'onAll',value:function(E,C){var w=this;return Array.isArray(E)?(E.map(function(R){return w.on(R,C)}),this):void this.handleError('onAll: first argument must be a list (Array) of events to observe',eventNames)}},{key:'publishCriteria',value:function(E,C){if(this.log('publishCriteria',E,C),'string'==typeof E){return this.publish(E,C)}var R=E.topic,I=E.event,N=E.status;this.observers=this.observers||{};var B=this.observers[R]||{};B=B[I]||{},this.publishTo(B.observers,C,E),this.publishTo(B[N],C,E)}},{key:'publishTo',value:function(E,C,w){return Array.isArray(E)?E.map(function(R){return R(C)}):this.log('no observers registered for',w),this}},{key:'publish',value:function(E,C){if(this.log('publish',E,C),'object'===('undefined'==typeof E?'undefined':h(E))){var w=this._criteria(E,C);this.publishCriteria(w,C)}this.observers=this.observers||{};var R=this.observers[E]||[];return R?R.map(function(I){return I(C)}):this.log('no observers registered for',E),this}},{key:'defaultTopic',get:function(){return'default'}}]),S}(_.Loggable)},function(t,o,r){'use strict';function f(C,w){if(!(C instanceof w))throw new TypeError('Cannot call a class as a function')}function p(C,w){if(!C)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return w&&('object'==typeof w||'function'==typeof w)?w:C}function h(C,w){if('function'!=typeof w&&null!==w)throw new TypeError('Super expression must either be null or a function, not '+typeof w);C.prototype=Object.create(w&&w.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(C,w):C.__proto__=w)}function k(C){return'object'===('undefined'==typeof C?'undefined':P(C))&&null!==C}Object.defineProperty(o,'__esModule',{value:!0}),o.Store=void 0;var _=function(){function C(w,R){for(var N,I=0;I<R.length;I++)N=R[I],N.enumerable=N.enumerable||!1,N.configurable=!0,'value'in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}return function(w,R,I){return R&&C(w.prototype,R),I&&C(w,I),w}}(),P='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(C){return typeof C}:function(C){return C&&'function'==typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?'symbol':typeof C};o.createStore=function(C){var w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return new E(C,w)};var A=r(3),S=r(1),T=function(C){return C&&C.__esModule?C:{default:C}}(S),E=o.Store=function(C){function w(R){var I=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};f(this,w);var N=p(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,'Store',I));return N.configured={},N.validated={},N.keyNames=R,N.opts=I,N.log('create',{keyNames:N.keyNames,opts:N.opts}),N.configure(),N.postConfigure(),N}return h(w,C),_(w,[{key:'configure',value:function(I){if(!this.configured.Store||I){this.configured.Store=!1;var N=this.keyNames||{},B=this.opts;try{this.keyNames=Object.assign({},this.defaultKeyNames,N.storage||N),this.configureKeyNames(),this.storage=B.store||B.keyStore||this.localStorage,this.configured.Store=!0}catch(O){this.handleError('Store.configure',{opts:B,keyNames:N,errMsg:O.message,cause:O})}}}},{key:'configureKeyNames',value:function(I){I=I||this.keyNames,k(I)||this.handleError('keyNames must be an Object',{keyNames:I,defaultKeyNames:this.defaultKeyNames}),this.authTokenKeyName=I.authTokenKeyName,this.gqlServerTokenKeyName=I.gqlServerTokenKeyName,this.serverTokenKeyName=I.serverTokenKeyName}},{key:'postConfigure',value:function(){this.validateConfig()}},{key:'validateConfig',value:function(){this.validated.Store=!1,this.log('validateConfig'),this.validateAllKeyNames(),this.validated.Store=!0}},{key:'validateAllKeyNames',value:function(){this.validateKeyName('authTokenKeyName'),this.validateKeyName('gqlServerTokenKeyName','warn'),this.validateKeyName('serverTokenKeyName','warn')}},{key:'validateKeyName',value:function(I,N){this[I]||this[N]('Store: key '+I+' not defined',{keyNames:this.keyNames,store:this})}},{key:'validateKeyNames',value:function(){for(var I=this,N=arguments.length,B=Array(N),O=0;O<N;O++)B[O]=arguments[O];B.map(function(U){return I.validateKeyName(U)})}},{key:'removeItem',value:function(I){return this.storage.removeItem(I),this.publish('remove',{name:I}),this}},{key:'getItem',value:function(I){return this.storage.getItem(I)}},{key:'setItem',value:function(I,N){return this.storage.setItem(I,N),this.publish('set',{name:I,value:N}),this}},{key:'resetAll',value:function(){return this.removeItem(this.authTokenKeyName),this.removeItem(this.gqlServerTokenKeyName),this.removeItem(this.serverTokenKeyName),this.publish('reset'),this}},{key:'getAll',value:function(){0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{authToken:this.getItem(this.authTokenKeyName),gqlServerToken:this.getItem(this.gqlServerTokenKeyName),serverToken:this.getItem(this.serverTokenKeyName)}}},{key:'store',value:function(I,N){2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(0>this.keyNames.indexOf(I))throw Error('keyname mismatch for store: '+I);this.setItem(I,N)}},{key:'defaultKeyNames',get:function(){return T.default}},{key:'localStorage',get:function(){try{return window.localStorage}catch(I){this.handleError('missing global window Object to retrieve localStorage')}}}]),w}(A.Notifiable)},function(t,o,r){'use strict';Object.defineProperty(o,'__esModule',{value:!0}),o.setup=function(h){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},v=k.createStore,_=k.createLock;if(v=v||p.createStore,_=_||f.createLock,!_)throw Error('Missing createLock (function) option to create the Auth0 lock');if(v){var P=h.keyNames||h.storage;h.store=v(P,k)}var A=_(h,k);return{lock:A}};var f=r(2),p=r(0)},function(t,o,r){'use strict';Object.defineProperty(o,'__esModule',{value:!0});var u=r(2);Object.defineProperty(o,'Lock',{enumerable:!0,get:function(){return u.Lock}}),Object.defineProperty(o,'createLock',{enumerable:!0,get:function(){return u.createLock}});var f=r(0);Object.defineProperty(o,'Store',{enumerable:!0,get:function(){return f.Store}}),Object.defineProperty(o,'createStore',{enumerable:!0,get:function(){return f.createStore}});var p=r(5);Object.defineProperty(o,'setup',{enumerable:!0,get:function(){return p.setup}})},function(t,o,r){'use strict';function f(C,w){if(!(C instanceof w))throw new TypeError('Cannot call a class as a function')}function p(C,w){if(!C)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return w&&('object'==typeof w||'function'==typeof w)?w:C}function h(C,w){if('function'!=typeof w&&null!==w)throw new TypeError('Super expression must either be null or a function, not '+typeof w);C.prototype=Object.create(w&&w.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(C,w):C.__proto__=w)}Object.defineProperty(o,'__esModule',{value:!0}),o.Configurable=void 0;var k='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(C){return typeof C}:function(C){return C&&'function'==typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?'symbol':typeof C},v=function(){function C(w,R){for(var N,I=0;I<R.length;I++)N=R[I],N.enumerable=N.enumerable||!1,N.configurable=!0,'value'in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}return function(w,R,I){return R&&C(w.prototype,R),I&&C(w,I),w}}(),_=r(1),P=function(C){return C&&C.__esModule?C:{default:C}}(_),A=r(3),S=r(4),T=r(8),E=o.Configurable=function(C){function w(){var R=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},I=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};f(this,w);var N=p(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,'Configurable',I));return N.configured={},N.validated={},N.validate(R),N.log('configuring with',{config:R,opts:I}),N.opts=N.opts||I,N.config=R,N.configure(),N.postConfig(),N}return h(w,C),v(w,[{key:'configure',value:function(){if(!this.configured.Configurable)return this.log('Configurable: configure'),this.observers={},this.configureStorage(),this.configured.Configurable=!0,this}},{key:'postConfig',value:function(){return this.validateConfig(),this.retrieveTokens(),this}},{key:'configureStorage',value:function(){this.log('configureStorage');var I=this.config,N=this.opts;return this.extractProperties([I,N],'storage','keyNames','store'),this.keyNames=this.keyNames||this.storage||P.default,this.store=this.store||this.createStore(this.keyNames,this.opts),this}},{key:'validateConfig',value:function(){var I=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.validated.Configurable&&!I||(this.log('validateConfig',{store:this.store,keyNames:this.keyNames}),'object'!==k(this.store)&&this.configError('missing store for holding auth tokens'),'object'!==k(this.keyNames)&&this.configError('missing keyNames object, used to indicate store token keys'),this.validated.Configurable=!0)}},{key:'retrieveTokens',value:function(){return this.log('retrieveTokens',{store:this.store}),(0,T.isFun)(this.store.getAll)||this.error('Store is missing function getAll to retrieve tokens'),this.tokens=this.store.getAll()||{},this}},{key:'extractProperty',value:function(I,N,B){this.log('extractProperty',N,{self:B}),(0,T.isArray)(I)||this.handleError('extractProperty: containers must be an Array',I);var O=I.find(function(K){return(K||{})[N]})||{},U=O[N];if(U||this.warn('no value found for',N),B&&U){var Y=(0,T.isFun)(U)?U.name:U;this.log('extract: set',N,'to',Y),this[N]=U}return U}},{key:'extractProps',value:function(I,N){for(var B=this,O=arguments.length,U=Array(2<O?O-2:0),Y=2;Y<O;Y++)U[Y-2]=arguments[Y];return this.log('extractProperties',U),U.reduce(function(K,D){var M=B.extractProperty(N,D,I);return K[D]=M,K},{})}},{key:'extractProperties',value:function(I){for(var N=arguments.length,B=Array(1<N?N-1:0),O=1;O<N;O++)B[O-1]=arguments[O];return this.extractProps.apply(this,[!0,I].concat(B))}},{key:'configError',value:function(I){this.handleError(I)}},{key:'createStore',value:function(I){var N=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},B=N,R=B.createStore;return I=I||this.keyNames,N=N||this.opts,this.log('createStore',{keyNames:I,opts:N}),R=(0,T.isFun)(R)?R:this.defaultCreateStore,this.log('create with',{createStore:R}),R(I,N)}},{key:'defaultCreateStore',value:function(I,N){return(0,S.createStore)(I,N)}},{key:'validate',value:function(I){(0,T.isObject)(I)||this.handleError('config must be an object',I)}}]),w}(A.Notifiable)},function(t,o){'use strict';Object.defineProperty(o,'__esModule',{value:!0});var h='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&'function'==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?'symbol':typeof k};o.isFun=function(k){return'function'==typeof k},o.isObject=function(k){return'object'===('undefined'==typeof k?'undefined':h(k))},o.isArray=function(k){return Array.isArray(k)}},function(t,o){'use strict';function u(h,k){if(!(h instanceof k))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(o,'__esModule',{value:!0});var f=function(){function h(k,v){for(var P,_=0;_<v.length;_++)P=v[_],P.enumerable=P.enumerable||!1,P.configurable=!0,'value'in P&&(P.writable=!0),Object.defineProperty(k,P.key,P)}return function(k,v,_){return v&&h(k.prototype,v),_&&h(k,_),k}}(),p=o.Loggable=function(){function h(k){var v=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};u(this,h),this.opts=v,this.io=v.io||console,this.logging=v.logging,this.name=k||v.name}return f(h,[{key:'handleError',value:function(v,_){throw this.error(v,_),this.notify&&this.notify('error',_),v}},{key:'enableLog',value:function(){return this.logging=!0,this}},{key:'disableLog',value:function(){return this.logging=!1,this}},{key:'label',value:function(v){return v=v.toUpperCase(),'['+this.name+'] '+v+':'}},{key:'warn',value:function(v,_){if(this.logging)return this.io.log(this.label('warning'),v,_)}},{key:'log',value:function(v,_){if(this.logging)return this.io.log(this.label('info'),v,_)}},{key:'error',value:function(v,_){if(this.logging)return this.io.error(this.label('error'),v,_)}}]),h}()},function(t,o){'use strict';function u(C){var w=C.length;if(0<w%4)throw new Error('Invalid string. Length must be a multiple of 4');return'='===C[w-2]?2:'='===C[w-1]?1:0}function h(C){return _[63&C>>18]+_[63&C>>12]+_[63&C>>6]+_[63&C]}function k(C,w,R){for(var I,N=[],B=w;B<R;B+=3)I=(C[B]<<16)+(C[B+1]<<8)+C[B+2],N.push(h(I));return N.join('')}o.byteLength=function(C){return 3*C.length/4-u(C)},o.toByteArray=function(C){var w,R,I,N,B,O,U=C.length;B=u(C),O=new A(3*U/4-B),I=0<B?U-4:U;var Y=0;for(w=0,R=0;w<I;w+=4,R+=3)N=P[C.charCodeAt(w)]<<18|P[C.charCodeAt(w+1)]<<12|P[C.charCodeAt(w+2)]<<6|P[C.charCodeAt(w+3)],O[Y++]=255&N>>16,O[Y++]=255&N>>8,O[Y++]=255&N;return 2===B?(N=P[C.charCodeAt(w)]<<2|P[C.charCodeAt(w+1)]>>4,O[Y++]=255&N):1===B&&(N=P[C.charCodeAt(w)]<<10|P[C.charCodeAt(w+1)]<<4|P[C.charCodeAt(w+2)]>>2,O[Y++]=255&N>>8,O[Y++]=255&N),O},o.fromByteArray=function(C){for(var w,R=C.length,I=R%3,N='',B=[],O=16383,U=0,Y=R-I;U<Y;U+=O)B.push(k(C,U,U+O>Y?Y:U+O));return 1==I?(w=C[R-1],N+=_[w>>2],N+=_[63&w<<4],N+='=='):2==I&&(w=(C[R-2]<<8)+C[R-1],N+=_[w>>10],N+=_[63&w>>4],N+=_[63&w<<2],N+='='),B.push(N),B.join('')};for(var _=[],P=[],A='undefined'==typeof Uint8Array?Array:Uint8Array,S='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',T=0,E=S.length;T<E;++T)_[T]=S[T],P[S.charCodeAt(T)]=T;P['-'.charCodeAt(0)]=62,P['_'.charCodeAt(0)]=63},function(t,o,r){'use strict';(function(u){function p(){return k.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function h(ke,be){if(p()<be)throw new RangeError('Invalid typed array length');return k.TYPED_ARRAY_SUPPORT?(ke=new Uint8Array(be),ke.__proto__=k.prototype):(null===ke&&(ke=new k(be)),ke.length=be),ke}function k(ke,be,ve){if(!k.TYPED_ARRAY_SUPPORT&&!(this instanceof k))return new k(ke,be,ve);if('number'==typeof ke){if('string'==typeof be)throw new Error('If encoding is specified then the first argument must be a string');return A(this,ke)}return v(this,ke,be,ve)}function v(ke,be,ve,_e){if('number'==typeof be)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&be instanceof ArrayBuffer?E(ke,be,ve,_e):'string'==typeof be?S(ke,be,ve):C(ke,be)}function _(ke){if('number'!=typeof ke)throw new TypeError('"size" argument must be a number');else if(0>ke)throw new RangeError('"size" argument must not be negative')}function P(ke,be,ve,_e){return _(be),0>=be?h(ke,be):void 0===ve?h(ke,be):'string'==typeof _e?h(ke,be).fill(ve,_e):h(ke,be).fill(ve)}function A(ke,be){if(_(be),ke=h(ke,0>be?0:0|w(be)),!k.TYPED_ARRAY_SUPPORT)for(var ve=0;ve<be;++ve)ke[ve]=0;return ke}function S(ke,be,ve){if(('string'!=typeof ve||''===ve)&&(ve='utf8'),!k.isEncoding(ve))throw new TypeError('"encoding" must be a valid string encoding');var _e=0|I(be,ve);ke=h(ke,_e);var Pe=ke.write(be,ve);return Pe!==_e&&(ke=ke.slice(0,Pe)),ke}function T(ke,be){var ve=0>be.length?0:0|w(be.length);ke=h(ke,ve);for(var _e=0;_e<ve;_e+=1)ke[_e]=255&be[_e];return ke}function E(ke,be,ve,_e){if(be.byteLength,0>ve||be.byteLength<ve)throw new RangeError('\'offset\' is out of bounds');if(be.byteLength<ve+(_e||0))throw new RangeError('\'length\' is out of bounds');return be=void 0===ve&&void 0===_e?new Uint8Array(be):void 0===_e?new Uint8Array(be,ve):new Uint8Array(be,ve,_e),k.TYPED_ARRAY_SUPPORT?(ke=be,ke.__proto__=k.prototype):ke=T(ke,be),ke}function C(ke,be){if(k.isBuffer(be)){var ve=0|w(be.length);return(ke=h(ke,ve),0===ke.length)?ke:(be.copy(ke,0,0,ve),ke)}if(be){if('undefined'!=typeof ArrayBuffer&&be.buffer instanceof ArrayBuffer||'length'in be)return'number'!=typeof be.length||pe(be.length)?h(ke,0):T(ke,be);if('Buffer'===be.type&&de(be.data))return T(ke,be.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function w(ke){if(ke>=p())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+p().toString(16)+' bytes');return 0|ke}function I(ke,be){if(k.isBuffer(ke))return ke.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(ke)||ke instanceof ArrayBuffer))return ke.byteLength;'string'!=typeof ke&&(ke=''+ke);var ve=ke.length;if(0===ve)return 0;for(var _e=!1;;)switch(be){case'ascii':case'latin1':case'binary':return ve;case'utf8':case'utf-8':case void 0:return ie(ke).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*ve;case'hex':return ve>>>1;case'base64':return fe(ke).length;default:if(_e)return ie(ke).length;be=(''+be).toLowerCase(),_e=!0;}}function N(ke,be,ve){var _e=!1;if((void 0===be||0>be)&&(be=0),be>this.length)return'';if((void 0===ve||ve>this.length)&&(ve=this.length),0>=ve)return'';if(ve>>>=0,be>>>=0,ve<=be)return'';for(ke||(ke='utf8');;)switch(ke){case'hex':return J(this,be,ve);case'utf8':case'utf-8':return X(this,be,ve);case'ascii':return V(this,be,ve);case'latin1':case'binary':return H(this,be,ve);case'base64':return z(this,be,ve);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return G(this,be,ve);default:if(_e)throw new TypeError('Unknown encoding: '+ke);ke=(ke+'').toLowerCase(),_e=!0;}}function B(ke,be,ve){var _e=ke[be];ke[be]=ke[ve],ke[ve]=_e}function O(ke,be,ve,_e,Pe){if(0===ke.length)return-1;if('string'==typeof ve?(_e=ve,ve=0):2147483647<ve?ve=2147483647:-2147483648>ve&&(ve=-2147483648),ve=+ve,isNaN(ve)&&(ve=Pe?0:ke.length-1),0>ve&&(ve=ke.length+ve),ve>=ke.length){if(Pe)return-1;ve=ke.length-1}else if(0>ve)if(Pe)ve=0;else return-1;if('string'==typeof be&&(be=k.from(be,_e)),k.isBuffer(be))return 0===be.length?-1:U(ke,be,ve,_e,Pe);if('number'==typeof be)return be&=255,k.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?Pe?Uint8Array.prototype.indexOf.call(ke,be,ve):Uint8Array.prototype.lastIndexOf.call(ke,be,ve):U(ke,[be],ve,_e,Pe);throw new TypeError('val must be string, number or Buffer')}function U(ke,be,ve,_e,Pe){function Ae(Ie,Ne){return 1==Se?Ie[Ne]:Ie.readUInt16BE(Ne*Se)}var Se=1,Te=ke.length,Ee=be.length;if(void 0!==_e&&(_e=(_e+'').toLowerCase(),'ucs2'===_e||'ucs-2'===_e||'utf16le'===_e||'utf-16le'===_e)){if(2>ke.length||2>be.length)return-1;Se=2,Te/=2,Ee/=2,ve/=2}var Ce;if(Pe){var we=-1;for(Ce=ve;Ce<Te;Ce++)if(Ae(ke,Ce)!==Ae(be,-1==we?0:Ce-we))-1!=we&&(Ce-=Ce-we),we=-1;else if(-1==we&&(we=Ce),Ce-we+1===Ee)return we*Se}else for(ve+Ee>Te&&(ve=Te-Ee),Ce=ve;0<=Ce;Ce--){for(var Le=!0,Re=0;Re<Ee;Re++)if(Ae(ke,Ce+Re)!==Ae(be,Re)){Le=!1;break}if(Le)return Ce}return-1}function Y(ke,be,ve,_e){ve=+ve||0;var Pe=ke.length-ve;_e?(_e=+_e,_e>Pe&&(_e=Pe)):_e=Pe;var Ae=be.length;if(0!=Ae%2)throw new TypeError('Invalid hex string');_e>Ae/2&&(_e=Ae/2);for(var Te,Se=0;Se<_e;++Se){if(Te=parseInt(be.substr(2*Se,2),16),isNaN(Te))return Se;ke[ve+Se]=Te}return Se}function K(ke,be,ve,_e){return ge(ie(be,ke.length-ve),ke,ve,_e)}function D(ke,be,ve,_e){return ge(ue(be),ke,ve,_e)}function M(ke,be,ve,_e){return D(ke,be,ve,_e)}function F(ke,be,ve,_e){return ge(fe(be),ke,ve,_e)}function q(ke,be,ve,_e){return ge(se(be,ke.length-ve),ke,ve,_e)}function z(ke,be,ve){return 0===be&&ve===ke.length?ce.fromByteArray(ke):ce.fromByteArray(ke.slice(be,ve))}function X(ke,be,ve){ve=_Mathmin(ke.length,ve);for(var _e=[],Pe=be;Pe<ve;){var Ae=ke[Pe],Se=null,Te=239<Ae?4:223<Ae?3:191<Ae?2:1;if(Pe+Te<=ve){var Ee,Ce,we,Le;1==Te?128>Ae&&(Se=Ae):2==Te?(Ee=ke[Pe+1],128==(192&Ee)&&(Le=(31&Ae)<<6|63&Ee,127<Le&&(Se=Le))):3==Te?(Ee=ke[Pe+1],Ce=ke[Pe+2],128==(192&Ee)&&128==(192&Ce)&&(Le=(15&Ae)<<12|(63&Ee)<<6|63&Ce,2047<Le&&(55296>Le||57343<Le)&&(Se=Le))):4==Te?(Ee=ke[Pe+1],Ce=ke[Pe+2],we=ke[Pe+3],128==(192&Ee)&&128==(192&Ce)&&128==(192&we)&&(Le=(15&Ae)<<18|(63&Ee)<<12|(63&Ce)<<6|63&we,65535<Le&&1114112>Le&&(Se=Le))):void 0}null===Se?(Se=65533,Te=1):65535<Se&&(Se-=65536,_e.push(55296|1023&Se>>>10),Se=56320|1023&Se),_e.push(Se),Pe+=Te}return W(_e)}function W(ke){var be=ke.length;if(be<=he)return _StringfromCharCode.apply(String,ke);for(var ve='',_e=0;_e<be;)ve+=_StringfromCharCode.apply(String,ke.slice(_e,_e+=he));return ve}function V(ke,be,ve){var _e='';ve=_Mathmin(ke.length,ve);for(var Pe=be;Pe<ve;++Pe)_e+=_StringfromCharCode(127&ke[Pe]);return _e}function H(ke,be,ve){var _e='';ve=_Mathmin(ke.length,ve);for(var Pe=be;Pe<ve;++Pe)_e+=_StringfromCharCode(ke[Pe]);return _e}function J(ke,be,ve){var _e=ke.length;(!be||0>be)&&(be=0),(!ve||0>ve||ve>_e)&&(ve=_e);for(var Pe='',Ae=be;Ae<ve;++Ae)Pe+=le(ke[Ae]);return Pe}function G(ke,be,ve){for(var _e=ke.slice(be,ve),Pe='',Ae=0;Ae<_e.length;Ae+=2)Pe+=_StringfromCharCode(_e[Ae]+256*_e[Ae+1]);return Pe}function Z(ke,be,ve){if(0!=ke%1||0>ke)throw new RangeError('offset is not uint');if(ke+be>ve)throw new RangeError('Trying to access beyond buffer length')}function Q(ke,be,ve,_e,Pe,Ae){if(!k.isBuffer(ke))throw new TypeError('"buffer" argument must be a Buffer instance');if(be>Pe||be<Ae)throw new RangeError('"value" argument is out of bounds');if(ve+_e>ke.length)throw new RangeError('Index out of range')}function $(ke,be,ve,_e){0>be&&(be=65535+be+1);for(var Pe=0,Ae=_Mathmin(ke.length-ve,2);Pe<Ae;++Pe)ke[ve+Pe]=(be&255<<8*(_e?Pe:1-Pe))>>>8*(_e?Pe:1-Pe)}function ee(ke,be,ve,_e){0>be&&(be=4294967295+be+1);for(var Pe=0,Ae=_Mathmin(ke.length-ve,4);Pe<Ae;++Pe)ke[ve+Pe]=255&be>>>8*(_e?Pe:3-Pe)}function te(ke,be,ve,_e){if(ve+_e>ke.length)throw new RangeError('Index out of range');if(0>ve)throw new RangeError('Index out of range')}function oe(ke,be,ve,_e,Pe){return Pe||te(ke,be,ve,4,3.4028234663852886e38,-3.4028234663852886e38),ye.write(ke,be,ve,_e,23,4),ve+4}function re(ke,be,ve,_e,Pe){return Pe||te(ke,be,ve,8,1.7976931348623157e308,-1.7976931348623157e308),ye.write(ke,be,ve,_e,52,8),ve+8}function ne(ke){if(ke=ae(ke).replace(me,''),2>ke.length)return'';for(;0!=ke.length%4;)ke+='=';return ke}function ae(ke){return ke.trim?ke.trim():ke.replace(/^\s+|\s+$/g,'')}function le(ke){return 16>ke?'0'+ke.toString(16):ke.toString(16)}function ie(ke,be){be=be||Infinity;for(var ve,_e=ke.length,Pe=null,Ae=[],Se=0;Se<_e;++Se){if(ve=ke.charCodeAt(Se),55295<ve&&57344>ve){if(!Pe){if(56319<ve){-1<(be-=3)&&Ae.push(239,191,189);continue}else if(Se+1===_e){-1<(be-=3)&&Ae.push(239,191,189);continue}Pe=ve;continue}if(56320>ve){-1<(be-=3)&&Ae.push(239,191,189),Pe=ve;continue}ve=(Pe-55296<<10|ve-56320)+65536}else Pe&&-1<(be-=3)&&Ae.push(239,191,189);if(Pe=null,128>ve){if(0>(be-=1))break;Ae.push(ve)}else if(2048>ve){if(0>(be-=2))break;Ae.push(192|ve>>6,128|63&ve)}else if(65536>ve){if(0>(be-=3))break;Ae.push(224|ve>>12,128|63&ve>>6,128|63&ve)}else if(1114112>ve){if(0>(be-=4))break;Ae.push(240|ve>>18,128|63&ve>>12,128|63&ve>>6,128|63&ve)}else throw new Error('Invalid code point')}return Ae}function ue(ke){for(var be=[],ve=0;ve<ke.length;++ve)be.push(255&ke.charCodeAt(ve));return be}function se(ke,be){for(var ve,_e,Pe,Ae=[],Se=0;Se<ke.length&&!(0>(be-=2));++Se)ve=ke.charCodeAt(Se),_e=ve>>8,Pe=ve%256,Ae.push(Pe),Ae.push(_e);return Ae}function fe(ke){return ce.toByteArray(ne(ke))}function ge(ke,be,ve,_e){for(var Pe=0;Pe<_e&&!(Pe+ve>=be.length||Pe>=ke.length);++Pe)be[Pe+ve]=ke[Pe];return Pe}function pe(ke){return ke!==ke}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var ce=r(10),ye=r(13),de=r(14);o.Buffer=k,o.SlowBuffer=function(ke){return+ke!=ke&&(ke=0),k.alloc(+ke)},o.INSPECT_MAX_BYTES=50,k.TYPED_ARRAY_SUPPORT=u.TYPED_ARRAY_SUPPORT===void 0?function(){try{var ke=new Uint8Array(1);return ke.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===ke.foo()&&'function'==typeof ke.subarray&&0===ke.subarray(1,1).byteLength}catch(be){return!1}}():u.TYPED_ARRAY_SUPPORT,o.kMaxLength=p(),k.poolSize=8192,k._augment=function(ke){return ke.__proto__=k.prototype,ke},k.from=function(ke,be,ve){return v(null,ke,be,ve)},k.TYPED_ARRAY_SUPPORT&&(k.prototype.__proto__=Uint8Array.prototype,k.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&k[Symbol.species]===k&&Object.defineProperty(k,Symbol.species,{value:null,configurable:!0})),k.alloc=function(ke,be,ve){return P(null,ke,be,ve)},k.allocUnsafe=function(ke){return A(null,ke)},k.allocUnsafeSlow=function(ke){return A(null,ke)},k.isBuffer=function(be){return!!(null!=be&&be._isBuffer)},k.compare=function(be,ve){if(!k.isBuffer(be)||!k.isBuffer(ve))throw new TypeError('Arguments must be Buffers');if(be===ve)return 0;for(var _e=be.length,Pe=ve.length,Ae=0,Se=_Mathmin(_e,Pe);Ae<Se;++Ae)if(be[Ae]!==ve[Ae]){_e=be[Ae],Pe=ve[Ae];break}return _e<Pe?-1:Pe<_e?1:0},k.isEncoding=function(be){switch((be+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},k.concat=function(be,ve){if(!de(be))throw new TypeError('"list" argument must be an Array of Buffers');if(0===be.length)return k.alloc(0);var _e;if(ve===void 0)for(ve=0,_e=0;_e<be.length;++_e)ve+=be[_e].length;var Pe=k.allocUnsafe(ve),Ae=0;for(_e=0;_e<be.length;++_e){var Se=be[_e];if(!k.isBuffer(Se))throw new TypeError('"list" argument must be an Array of Buffers');Se.copy(Pe,Ae),Ae+=Se.length}return Pe},k.byteLength=I,k.prototype._isBuffer=!0,k.prototype.swap16=function(){var be=this.length;if(0!=be%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var ve=0;ve<be;ve+=2)B(this,ve,ve+1);return this},k.prototype.swap32=function(){var be=this.length;if(0!=be%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var ve=0;ve<be;ve+=4)B(this,ve,ve+3),B(this,ve+1,ve+2);return this},k.prototype.swap64=function(){var be=this.length;if(0!=be%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var ve=0;ve<be;ve+=8)B(this,ve,ve+7),B(this,ve+1,ve+6),B(this,ve+2,ve+5),B(this,ve+3,ve+4);return this},k.prototype.toString=function(){var be=0|this.length;return 0==be?'':0===arguments.length?X(this,0,be):N.apply(this,arguments)},k.prototype.equals=function(be){if(!k.isBuffer(be))throw new TypeError('Argument must be a Buffer');return this===be||0===k.compare(this,be)},k.prototype.inspect=function(){var be='',ve=o.INSPECT_MAX_BYTES;return 0<this.length&&(be=this.toString('hex',0,ve).match(/.{2}/g).join(' '),this.length>ve&&(be+=' ... ')),'<Buffer '+be+'>'},k.prototype.compare=function(be,ve,_e,Pe,Ae){if(!k.isBuffer(be))throw new TypeError('Argument must be a Buffer');if(void 0===ve&&(ve=0),void 0===_e&&(_e=be?be.length:0),void 0===Pe&&(Pe=0),void 0===Ae&&(Ae=this.length),0>ve||_e>be.length||0>Pe||Ae>this.length)throw new RangeError('out of range index');if(Pe>=Ae&&ve>=_e)return 0;if(Pe>=Ae)return-1;if(ve>=_e)return 1;if(ve>>>=0,_e>>>=0,Pe>>>=0,Ae>>>=0,this===be)return 0;for(var Se=Ae-Pe,Te=_e-ve,Ee=_Mathmin(Se,Te),Ce=this.slice(Pe,Ae),we=be.slice(ve,_e),Le=0;Le<Ee;++Le)if(Ce[Le]!==we[Le]){Se=Ce[Le],Te=we[Le];break}return Se<Te?-1:Te<Se?1:0},k.prototype.includes=function(be,ve,_e){return-1!==this.indexOf(be,ve,_e)},k.prototype.indexOf=function(be,ve,_e){return O(this,be,ve,_e,!0)},k.prototype.lastIndexOf=function(be,ve,_e){return O(this,be,ve,_e,!1)},k.prototype.write=function(be,ve,_e,Pe){if(void 0===ve)Pe='utf8',_e=this.length,ve=0;else if(void 0===_e&&'string'==typeof ve)Pe=ve,_e=this.length,ve=0;else if(isFinite(ve))ve|=0,isFinite(_e)?(_e|=0,void 0===Pe&&(Pe='utf8')):(Pe=_e,_e=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var Ae=this.length-ve;if((void 0===_e||_e>Ae)&&(_e=Ae),0<be.length&&(0>_e||0>ve)||ve>this.length)throw new RangeError('Attempt to write outside buffer bounds');Pe||(Pe='utf8');for(var Se=!1;;)switch(Pe){case'hex':return Y(this,be,ve,_e);case'utf8':case'utf-8':return K(this,be,ve,_e);case'ascii':return D(this,be,ve,_e);case'latin1':case'binary':return M(this,be,ve,_e);case'base64':return F(this,be,ve,_e);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return q(this,be,ve,_e);default:if(Se)throw new TypeError('Unknown encoding: '+Pe);Pe=(''+Pe).toLowerCase(),Se=!0;}},k.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var he=4096;k.prototype.slice=function(be,ve){var _e=this.length;be=~~be,ve=ve===void 0?_e:~~ve,0>be?(be+=_e,0>be&&(be=0)):be>_e&&(be=_e),0>ve?(ve+=_e,0>ve&&(ve=0)):ve>_e&&(ve=_e),ve<be&&(ve=be);var Pe;if(k.TYPED_ARRAY_SUPPORT)Pe=this.subarray(be,ve),Pe.__proto__=k.prototype;else{var Ae=ve-be;Pe=new k(Ae,void 0);for(var Se=0;Se<Ae;++Se)Pe[Se]=this[Se+be]}return Pe},k.prototype.readUIntLE=function(be,ve,_e){be|=0,ve|=0,_e||Z(be,ve,this.length);for(var Pe=this[be],Ae=1,Se=0;++Se<ve&&(Ae*=256);)Pe+=this[be+Se]*Ae;return Pe},k.prototype.readUIntBE=function(be,ve,_e){be|=0,ve|=0,_e||Z(be,ve,this.length);for(var Pe=this[be+--ve],Ae=1;0<ve&&(Ae*=256);)Pe+=this[be+--ve]*Ae;return Pe},k.prototype.readUInt8=function(be,ve){return ve||Z(be,1,this.length),this[be]},k.prototype.readUInt16LE=function(be,ve){return ve||Z(be,2,this.length),this[be]|this[be+1]<<8},k.prototype.readUInt16BE=function(be,ve){return ve||Z(be,2,this.length),this[be]<<8|this[be+1]},k.prototype.readUInt32LE=function(be,ve){return ve||Z(be,4,this.length),(this[be]|this[be+1]<<8|this[be+2]<<16)+16777216*this[be+3]},k.prototype.readUInt32BE=function(be,ve){return ve||Z(be,4,this.length),16777216*this[be]+(this[be+1]<<16|this[be+2]<<8|this[be+3])},k.prototype.readIntLE=function(be,ve,_e){be|=0,ve|=0,_e||Z(be,ve,this.length);for(var Pe=this[be],Ae=1,Se=0;++Se<ve&&(Ae*=256);)Pe+=this[be+Se]*Ae;return Ae*=128,Pe>=Ae&&(Pe-=_Mathpow(2,8*ve)),Pe},k.prototype.readIntBE=function(be,ve,_e){be|=0,ve|=0,_e||Z(be,ve,this.length);for(var Pe=ve,Ae=1,Se=this[be+--Pe];0<Pe&&(Ae*=256);)Se+=this[be+--Pe]*Ae;return Ae*=128,Se>=Ae&&(Se-=_Mathpow(2,8*ve)),Se},k.prototype.readInt8=function(be,ve){return ve||Z(be,1,this.length),128&this[be]?-1*(255-this[be]+1):this[be]},k.prototype.readInt16LE=function(be,ve){ve||Z(be,2,this.length);var _e=this[be]|this[be+1]<<8;return 32768&_e?4294901760|_e:_e},k.prototype.readInt16BE=function(be,ve){ve||Z(be,2,this.length);var _e=this[be+1]|this[be]<<8;return 32768&_e?4294901760|_e:_e},k.prototype.readInt32LE=function(be,ve){return ve||Z(be,4,this.length),this[be]|this[be+1]<<8|this[be+2]<<16|this[be+3]<<24},k.prototype.readInt32BE=function(be,ve){return ve||Z(be,4,this.length),this[be]<<24|this[be+1]<<16|this[be+2]<<8|this[be+3]},k.prototype.readFloatLE=function(be,ve){return ve||Z(be,4,this.length),ye.read(this,be,!0,23,4)},k.prototype.readFloatBE=function(be,ve){return ve||Z(be,4,this.length),ye.read(this,be,!1,23,4)},k.prototype.readDoubleLE=function(be,ve){return ve||Z(be,8,this.length),ye.read(this,be,!0,52,8)},k.prototype.readDoubleBE=function(be,ve){return ve||Z(be,8,this.length),ye.read(this,be,!1,52,8)},k.prototype.writeUIntLE=function(be,ve,_e,Pe){if(be=+be,ve|=0,_e|=0,!Pe){var Ae=_Mathpow(2,8*_e)-1;Q(this,be,ve,_e,Ae,0)}var Se=1,Te=0;for(this[ve]=255&be;++Te<_e&&(Se*=256);)this[ve+Te]=255&be/Se;return ve+_e},k.prototype.writeUIntBE=function(be,ve,_e,Pe){if(be=+be,ve|=0,_e|=0,!Pe){var Ae=_Mathpow(2,8*_e)-1;Q(this,be,ve,_e,Ae,0)}var Se=_e-1,Te=1;for(this[ve+Se]=255&be;0<=--Se&&(Te*=256);)this[ve+Se]=255&be/Te;return ve+_e},k.prototype.writeUInt8=function(be,ve,_e){return be=+be,ve|=0,_e||Q(this,be,ve,1,255,0),k.TYPED_ARRAY_SUPPORT||(be=_Mathfloor(be)),this[ve]=255&be,ve+1},k.prototype.writeUInt16LE=function(be,ve,_e){return be=+be,ve|=0,_e||Q(this,be,ve,2,65535,0),k.TYPED_ARRAY_SUPPORT?(this[ve]=255&be,this[ve+1]=be>>>8):$(this,be,ve,!0),ve+2},k.prototype.writeUInt16BE=function(be,ve,_e){return be=+be,ve|=0,_e||Q(this,be,ve,2,65535,0),k.TYPED_ARRAY_SUPPORT?(this[ve]=be>>>8,this[ve+1]=255&be):$(this,be,ve,!1),ve+2},k.prototype.writeUInt32LE=function(be,ve,_e){return be=+be,ve|=0,_e||Q(this,be,ve,4,4294967295,0),k.TYPED_ARRAY_SUPPORT?(this[ve+3]=be>>>24,this[ve+2]=be>>>16,this[ve+1]=be>>>8,this[ve]=255&be):ee(this,be,ve,!0),ve+4},k.prototype.writeUInt32BE=function(be,ve,_e){return be=+be,ve|=0,_e||Q(this,be,ve,4,4294967295,0),k.TYPED_ARRAY_SUPPORT?(this[ve]=be>>>24,this[ve+1]=be>>>16,this[ve+2]=be>>>8,this[ve+3]=255&be):ee(this,be,ve,!1),ve+4},k.prototype.writeIntLE=function(be,ve,_e,Pe){if(be=+be,ve|=0,!Pe){var Ae=_Mathpow(2,8*_e-1);Q(this,be,ve,_e,Ae-1,-Ae)}var Se=0,Te=1,Ee=0;for(this[ve]=255&be;++Se<_e&&(Te*=256);)0>be&&0==Ee&&0!==this[ve+Se-1]&&(Ee=1),this[ve+Se]=255&(be/Te>>0)-Ee;return ve+_e},k.prototype.writeIntBE=function(be,ve,_e,Pe){if(be=+be,ve|=0,!Pe){var Ae=_Mathpow(2,8*_e-1);Q(this,be,ve,_e,Ae-1,-Ae)}var Se=_e-1,Te=1,Ee=0;for(this[ve+Se]=255&be;0<=--Se&&(Te*=256);)0>be&&0==Ee&&0!==this[ve+Se+1]&&(Ee=1),this[ve+Se]=255&(be/Te>>0)-Ee;return ve+_e},k.prototype.writeInt8=function(be,ve,_e){return be=+be,ve|=0,_e||Q(this,be,ve,1,127,-128),k.TYPED_ARRAY_SUPPORT||(be=_Mathfloor(be)),0>be&&(be=255+be+1),this[ve]=255&be,ve+1},k.prototype.writeInt16LE=function(be,ve,_e){return be=+be,ve|=0,_e||Q(this,be,ve,2,32767,-32768),k.TYPED_ARRAY_SUPPORT?(this[ve]=255&be,this[ve+1]=be>>>8):$(this,be,ve,!0),ve+2},k.prototype.writeInt16BE=function(be,ve,_e){return be=+be,ve|=0,_e||Q(this,be,ve,2,32767,-32768),k.TYPED_ARRAY_SUPPORT?(this[ve]=be>>>8,this[ve+1]=255&be):$(this,be,ve,!1),ve+2},k.prototype.writeInt32LE=function(be,ve,_e){return be=+be,ve|=0,_e||Q(this,be,ve,4,2147483647,-2147483648),k.TYPED_ARRAY_SUPPORT?(this[ve]=255&be,this[ve+1]=be>>>8,this[ve+2]=be>>>16,this[ve+3]=be>>>24):ee(this,be,ve,!0),ve+4},k.prototype.writeInt32BE=function(be,ve,_e){return be=+be,ve|=0,_e||Q(this,be,ve,4,2147483647,-2147483648),0>be&&(be=4294967295+be+1),k.TYPED_ARRAY_SUPPORT?(this[ve]=be>>>24,this[ve+1]=be>>>16,this[ve+2]=be>>>8,this[ve+3]=255&be):ee(this,be,ve,!1),ve+4},k.prototype.writeFloatLE=function(be,ve,_e){return oe(this,be,ve,!0,_e)},k.prototype.writeFloatBE=function(be,ve,_e){return oe(this,be,ve,!1,_e)},k.prototype.writeDoubleLE=function(be,ve,_e){return re(this,be,ve,!0,_e)},k.prototype.writeDoubleBE=function(be,ve,_e){return re(this,be,ve,!1,_e)},k.prototype.copy=function(be,ve,_e,Pe){if(_e||(_e=0),Pe||0===Pe||(Pe=this.length),ve>=be.length&&(ve=be.length),ve||(ve=0),0<Pe&&Pe<_e&&(Pe=_e),Pe===_e)return 0;if(0===be.length||0===this.length)return 0;if(0>ve)throw new RangeError('targetStart out of bounds');if(0>_e||_e>=this.length)throw new RangeError('sourceStart out of bounds');if(0>Pe)throw new RangeError('sourceEnd out of bounds');Pe>this.length&&(Pe=this.length),be.length-ve<Pe-_e&&(Pe=be.length-ve+_e);var Se,Ae=Pe-_e;if(this===be&&_e<ve&&ve<Pe)for(Se=Ae-1;0<=Se;--Se)be[Se+ve]=this[Se+_e];else if(1e3>Ae||!k.TYPED_ARRAY_SUPPORT)for(Se=0;Se<Ae;++Se)be[Se+ve]=this[Se+_e];else Uint8Array.prototype.set.call(be,this.subarray(_e,_e+Ae),ve);return Ae},k.prototype.fill=function(be,ve,_e,Pe){if('string'==typeof be){if('string'==typeof ve?(Pe=ve,ve=0,_e=this.length):'string'==typeof _e&&(Pe=_e,_e=this.length),1===be.length){var Ae=be.charCodeAt(0);256>Ae&&(be=Ae)}if(void 0!==Pe&&'string'!=typeof Pe)throw new TypeError('encoding must be a string');if('string'==typeof Pe&&!k.isEncoding(Pe))throw new TypeError('Unknown encoding: '+Pe)}else'number'==typeof be&&(be&=255);if(0>ve||this.length<ve||this.length<_e)throw new RangeError('Out of range index');if(_e<=ve)return this;ve>>>=0,_e=_e===void 0?this.length:_e>>>0,be||(be=0);var Se;if('number'==typeof be)for(Se=ve;Se<_e;++Se)this[Se]=be;else{var Te=k.isBuffer(be)?be:ie(new k(be,Pe).toString()),Ee=Te.length;for(Se=0;Se<_e-ve;++Se)this[Se+ve]=Te[Se%Ee]}return this};var me=/[^+\/0-9A-Za-z-_]/g}).call(o,r(15))},function(t,o,r){'use strict';(function(u){/*!
 * @description Recursive object extending
 * @author Viacheslav Lotsmanov <lotsmanov89@gmail.com>
 * @license MIT
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2013-2015 Viacheslav Lotsmanov
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */function f(v){return v instanceof u||v instanceof Date||v instanceof RegExp}function p(v){if(v instanceof u){var _=new u(v.length);return v.copy(_),_}if(v instanceof Date)return new Date(v.getTime());if(v instanceof RegExp)return new RegExp(v);throw new Error('Unexpected situation')}function h(v){var _=[];return v.forEach(function(P,A){_[A]='object'==typeof P&&null!==P?Array.isArray(P)?h(P):f(P)?p(P):k({},P):P}),_}var k=t.exports=function(){if(1>arguments.length||'object'!=typeof arguments[0])return!1;if(2>arguments.length)return arguments[0];var P,A,v=arguments[0],_=Array.prototype.slice.call(arguments,1);return _.forEach(function(T){'object'!=typeof T||null===T||Array.isArray(T)||Object.keys(T).forEach(function(E){return A=v[E],P=T[E],P===v?void 0:'object'!=typeof P||null===P?void(v[E]=P):Array.isArray(P)?void(v[E]=h(P)):f(P)?void(v[E]=p(P)):'object'!=typeof A||null===A||Array.isArray(A)?void(v[E]=k({},P)):void(v[E]=k(A,P))})}),v}}).call(o,r(11).Buffer)},function(t,o){o.read=function(r,u,f,p,h){var k,v,_=8*h-p-1,P=(1<<_)-1,A=P>>1,S=-7,T=f?h-1:0,E=f?-1:1,C=r[u+T];for(T+=E,k=C&(1<<-S)-1,C>>=-S,S+=_;0<S;k=256*k+r[u+T],T+=E,S-=8);for(v=k&(1<<-S)-1,k>>=-S,S+=p;0<S;v=256*v+r[u+T],T+=E,S-=8);if(0===k)k=1-A;else{if(k===P)return v?NaN:(C?-1:1)*Infinity;v+=_Mathpow(2,p),k-=A}return(C?-1:1)*v*_Mathpow(2,k-p)},o.write=function(r,u,f,p,h,k){var v,_,P,A=8*k-h-1,S=(1<<A)-1,T=S>>1,E=23===h?5.960464477539063e-8-6.617444900424222e-24:0,C=p?0:k-1,w=p?1:-1,R=0>u||0===u&&0>1/u?1:0;for(u=Math.abs(u),isNaN(u)||u===Infinity?(_=isNaN(u)?1:0,v=S):(v=_Mathfloor(Math.log(u)/Math.LN2),1>u*(P=_Mathpow(2,-v))&&(v--,P*=2),u+=1<=v+T?E/P:E*_Mathpow(2,1-T),2<=u*P&&(v++,P/=2),v+T>=S?(_=0,v=S):1<=v+T?(_=(u*P-1)*_Mathpow(2,h),v+=T):(_=u*_Mathpow(2,T-1)*_Mathpow(2,h),v=0));8<=h;r[f+C]=255&_,C+=w,_/=256,h-=8);for(v=v<<h|_,A+=h;0<A;r[f+C]=255&v,C+=w,v/=256,A-=8);r[f+C-w]|=128*R}},function(t){var r={}.toString;t.exports=Array.isArray||function(u){return'[object Array]'==r.call(u)}},function(t){var r=function(){return this}();try{r=r||Function('return this')()||(1,eval)('this')}catch(u){'object'==typeof window&&(r=window)}t.exports=r}])});
//# sourceMappingURL=bundle.prod.js.map