{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 1aa4b6c4714dcdf9a920","webpack:///../token-foundation/src/keynames.js","webpack:///../token-foundation/src/notifiable.js","webpack:///../token-foundation/src/store.js","webpack:///./src/gql-auth.js","webpack:///./src/index.js","webpack:///../gql-conn/src/gql-connection.js","webpack:///../gql-conn/src/index.js","webpack:///../token-foundation/src/configurable.js","webpack:///../token-foundation/src/index.js","webpack:///../token-foundation/src/is-type.js","webpack:///../token-foundation/src/loggable.js","webpack:///./~/process/browser.js"],"names":["authTokenKeyName","gqlServerTokenKeyName","serverTokenKeyName","Notifiable","name","opts","notifyLog","topic","defaultTopic","notifyError","notifyFailure","observers","msg","data","event","criteria","_criteria","publish","Object","assign","status","observer","log","eventObservers","concat","onCriteria","onStatus","slot","events","Array","isArray","map","on","handleError","eventNames","publishTo","publishCriteria","createStore","isObj","val","keyNames","Store","configured","validated","configure","postConfigure","force","defaultKeyNames","storage","configureKeyNames","store","keyStore","localStorage","err","errMsg","message","cause","validateConfig","validateAllKeyNames","validateKeyName","keyName","method","names","removeItem","getItem","value","setItem","authToken","gqlServerToken","serverToken","indexOf","Error","window","createGraphQLAuth","config","GraphQLAuth","postConfig","containers","client","extractProperties","connection","createConnection","configError","signinResult","signinUser","token","signinToken","notifySuccess","profile","doCreateUser","created","doSigninUser","extractSignedInUserToken","handleReceivedGraphQLServerToken","setGraphQLServerToken","setJwtToken","error","graphQLErrors","code","errorCode","USER_ALREADY_EXISTS","variables","result","userData","buildUserData","validateQueries","queries","createUser","query","doQuery","fakeCreateUser","handleQueryError","warn","fakeSigninUser","buildSigninUserData","GraphQLConnection","gqlServer","endpoint","process","env","gqlServer_endpoint","uri","isGqlQuery","toGqlQuery","kind","queryStr","gql","gqlServer_tokenKeyName","Configurable","validate","configureStorage","retrieveTokens","getAll","tokens","selfie","self","container","find","displayValue","reduce","acc","extractProperty","extractProps","defaultCreateStore","isFun","isObject","fun","obj","Loggable","io","console","logging","notify","lv","toUpperCase","label"],"mappings":"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M;AACb,UAAI,KAAK0I,OAAT,EAAkB;AAChB,eAAO,KAAKF,EAAL,CAAQ/H,GAAR,CAAY,KAAKqI,KAAL,CAAW,MAAX,CAAZ,EAAgC/I,GAAhC,EAAqCC,IAArC,CAAP;AACD;AACF;;;0BAEKD,G,EAAKC,I,EAAM;AACf,UAAI,KAAK0I,OAAT,EAAkB;AAChB,eAAO,KAAKF,EAAL,CAAQrD,KAAR,CAAc,KAAK2D,KAAL,CAAW,OAAX,CAAd,EAAmC/I,GAAnC,EAAwCC,IAAxC,CAAP;AACD;AACF;;;;;;;;;;AC/CH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"gqlAuth\"] = factory();\n\telse\n\t\troot[\"gqlAuth\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1aa4b6c4714dcdf9a920","export default {\n  authTokenKeyName: 'auth0Token',\n  gqlServerTokenKeyName: 'gqlServerAuthToken', // for GraphQL servers\n  serverTokenKeyName: 'serverAuthToken' // for misc servers/storage systems\n}\n\n\n\n// WEBPACK FOOTER //\n// ../token-foundation/src/keynames.js","import {\n  Loggable\n} from './loggable'\n\nexport class Notifiable extends Loggable {\n  constructor(name, opts) {\n    super(name, opts)\n    this.notifyLog = opts.notifyLog\n    this.topic = opts.topic || this.defaultTopic\n    this.notifyError = this.notifyFailure\n    this.observers = {}\n  }\n\n  log(msg, data) {\n    if (this.notifyLog === false) return\n    super.log(msg, data)\n  }\n\n  get defaultTopic() {\n    return 'default'\n  }\n\n  notify(event, data) {\n    let criteria = this._criteria(event, data, )\n    this.publish(criteria, data)\n  }\n\n  _criteria(event, data, opts = {}) {\n    return Object.assign({}, {\n      topic: this.topic,\n      event,\n      data\n    }, opts)\n  }\n\n  notifySuccess(event, data) {\n    let criteria = this._criteria(event, data, {\n      status: 'success'\n    })\n    this.publish(criteria, data)\n  }\n\n  notifyFailure(event, data) {\n    let criteria = this._criteria(event, data, {\n      status: 'failure'\n    })\n    this.publish(criteria, data)\n  }\n\n  onCriteria(criteria, observer) {\n    this.log('onCriteria', criteria, observer)\n    let {\n      topic,\n      event,\n      status\n    } = criteria\n    topic = topic || this.topic\n    this.observers[topic] = this.observers[topic] || {}\n    this.observers[topic][event] = this.observers[topic][event] || {}\n\n    let eventObservers = this.observers[topic][event]\n    if (status) {\n      eventObservers[status] = this.observers[topic][event][status] || []\n      eventObservers[status] = eventObservers[status].concat(observer)\n    } else {\n      eventObservers['observers'] = eventObservers['observers'] || []\n      eventObservers['observers'] = eventObservers['observers'].concat(observer)\n    }\n    return this\n  }\n\n  onStatus(event, status, observer) {\n    let criteria\n    if (typeof event === 'object') {\n      criteria = event\n    } else {\n      criteria = {\n        event\n      }\n    }\n    criteria.status = status\n    return this.onCriteria(criteria, observer)\n  }\n\n  onSuccess(criteria, observer) {\n    return this.onStatus(criteria, 'success', observer)\n  }\n\n  onFailure(criteria, observer) {\n    return this.onStatus(criteria, 'failure', observer)\n  }\n\n  on(event, observer) {\n    this.log('on', event, observer)\n    if (typeof event === 'object') {\n      let criteria = event\n      return this.onCriteria(criteria, observer)\n    }\n    let slot = this.observers[event] || []\n    this.observers[event] = slot.concat(observer)\n    return this\n  }\n\n  onAll(events, observer) {\n    if (Array.isArray(events)) {\n      events.map(event => this.on(event, observer))\n      return this\n    } else {\n      this.handleError('onAll: first argument must be a list (Array) of events to observe', eventNames)\n    }\n  }\n\n  publishCriteria(criteria, data) {\n    this.log('publishCriteria', criteria, data)\n    if (typeof criteria === 'string') {\n      let event = criteria\n      return this.publish(event, data)\n    }\n    let {\n      topic,\n      event,\n      status\n    } = criteria\n\n    this.observers = this.observers || {}\n    let observers = this.observers[topic] || {}\n    observers = observers[event] || {}\n\n    this.publishTo(observers['observers'], data, criteria)\n    this.publishTo(observers[status], data, criteria)\n  }\n\n  publishTo(observers, data, criteria) {\n    if (Array.isArray(observers)) {\n      observers.map(observer => observer(data))\n    } else {\n      this.log('no observers registered for', criteria)\n    }\n    return this\n  }\n\n  publish(event, data) {\n    this.log('publish', event, data)\n\n    if (typeof event === 'object') {\n      let criteria = this._criteria(event, data)\n      this.publishCriteria(criteria, data)\n    }\n\n    this.observers = this.observers || {}\n    let observers = this.observers[event] || []\n    if (observers) {\n      observers.map(observer => observer(data))\n    } else {\n      this.log('no observers registered for', event)\n    }\n    return this\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../token-foundation/src/notifiable.js","import {\n  Notifiable\n} from './notifiable'\n\nimport defaultKeyNames from './keynames'\n\nfunction isObj(val) {\n  return typeof val === 'object' && val !== null\n}\n\nexport function createStore(keyNames, opts = {}) {\n  return new Store(keyNames, opts)\n}\n\nexport class Store extends Notifiable {\n  constructor(keyNames, opts = {}) {\n    super('Store', opts)\n    this.configured = {}\n    this.validated = {}\n    this.keyNames = keyNames\n    this.opts = opts\n    this.log('create', {\n      keyNames: this.keyNames,\n      opts: this.opts\n    })\n    this.configure()\n    this.postConfigure()\n  }\n\n  configure(force) {\n    if (this.configured.Store && !force) return\n    this.configured.Store = false\n    let keyNames = this.keyNames || {}\n    let opts = this.opts\n    try {\n      this.keyNames = Object.assign({}, this.defaultKeyNames, keyNames.storage || keyNames)\n      this.configureKeyNames()\n\n      this.storage = opts.store || opts.keyStore || this.localStorage\n      this.configured.Store = true\n    } catch (err) {\n      this.handleError('Store.configure', {\n        opts,\n        keyNames,\n        errMsg: err.message,\n        cause: err\n      })\n    }\n  }\n\n  get defaultKeyNames() {\n    return defaultKeyNames\n  }\n\n  configureKeyNames(keyNames) {\n    keyNames = keyNames || this.keyNames\n    if (!isObj(keyNames)) {\n      this.handleError('keyNames must be an Object', {\n        keyNames,\n        defaultKeyNames: this.defaultKeyNames\n      })\n    }\n    // TODO: set in this.keys object instead\n    this.authTokenKeyName = keyNames.authTokenKeyName\n    this.gqlServerTokenKeyName = keyNames.gqlServerTokenKeyName\n    this.serverTokenKeyName = keyNames.serverTokenKeyName\n  }\n\n  postConfigure() {\n    this.validateConfig()\n  }\n\n  validateConfig() {\n    this.validated.Store = false\n    this.log('validateConfig')\n    this.validateAllKeyNames()\n    this.validated.Store = true\n  }\n\n  // TODO: iterate and validate keys in store\n  validateAllKeyNames() {\n    this.validateKeyName('authTokenKeyName')\n    this.validateKeyName('gqlServerTokenKeyName', 'warn')\n    this.validateKeyName('serverTokenKeyName', 'warn')\n  }\n\n  validateKeyName(keyName, method) {\n    if (!this[keyName]) {\n      this[method](`Store: key ${keyName} not defined`, {\n        keyNames: this.keyNames,\n        store: this\n      })\n    }\n  }\n\n  validateKeyNames(...names) {\n    names.map(name => this.validateKeyName(name))\n  }\n\n  get localStorage() {\n    try {\n      return window.localStorage\n    } catch (err) {\n      this.handleError('missing global window Object to retrieve localStorage')\n    }\n  }\n\n  removeItem(name) {\n    this.storage.removeItem(name)\n    this.publish('remove', {\n      name\n    })\n    return this\n  }\n\n  getItem(name) {\n    return this.storage.getItem(name)\n  }\n\n  setItem(name, value) {\n    this.storage.setItem(name, value)\n    this.publish('set', {\n      name,\n      value\n    })\n    return this\n  }\n\n  // TODO: iterate and remove keys in store\n  resetAll() {\n    this.removeItem(this.authTokenKeyName)\n    this.removeItem(this.gqlServerTokenKeyName)\n    this.removeItem(this.serverTokenKeyName)\n\n    this.publish('reset')\n    return this\n  }\n\n  // TODO: iterate and (reduce) return keys in store\n  getAll(opts = {}) {\n    return {\n      authToken: this.getItem(this.authTokenKeyName),\n      gqlServerToken: this.getItem(this.gqlServerTokenKeyName),\n      serverToken: this.getItem(this.serverTokenKeyName),\n    }\n  }\n\n  store(keyName, value, opts = {}) {\n    if (this.keyNames.indexOf(keyName) < 0) {\n      throw Error(`keyname mismatch for store: ${keyName}`)\n    }\n\n    this.setItem(keyName, value)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../token-foundation/src/store.js","import {\n  GraphQLConnection\n} from '@tecla5/gql-conn'\n\nexport function createGraphQLAuth(config, opts) {\n  return new GraphQLAuth(config, opts)\n}\n\nexport class GraphQLAuth extends GraphQLConnection {\n  constructor(config = {}, opts = {}) {\n    super(config, opts)\n    this.name = 'GraphQLAuth'\n    this.configure()\n    this.postConfig()\n  }\n\n  configure(force) {\n    if (this.configured.GraphQLAuth && !force) return\n    super.configure()\n    let config = this.config\n    let opts = this.opts\n\n    const containers = [config, opts, opts.client]\n    this.extractProperties(containers, 'createConnection', 'connection')\n\n    if (!this.connection && !this.createConnection) {\n      this.configError('Missing connection or createConnection option')\n    }\n\n    this.connection = this.connection || this.createConnection(config, opts)\n    this.configured.GraphQLAuth = true\n    return this\n  }\n\n  postConfig() {\n    super.postConfig()\n    this.validateConfig()\n  }\n\n  validateConfig(force) {\n    super.validateConfig()\n    if (this.validated.GraphQLAuth && !force) return\n    if (!this.connection) {\n      this.configError('missing GraphQL connection in configuration')\n    }\n    this.validated.GraphQLAuth = true\n  }\n\n  extractSignedInUserToken(signinResult) {\n    return signinResult.data.signinUser.token\n  }\n\n  get gqlServerTokenKeyName() {\n    return this.store.gqlServerTokenKeyName\n  }\n\n  setGraphQLServerToken(signinToken) {\n    if (!this.store) {\n      this.handleError('Missing store for setting signinToken', {\n        signinToken\n      })\n    }\n    // set graphcool token in localstorage\n    this.store.setItem(this.gqlServerTokenKeyName, signinToken)\n    this.notifySuccess('token:stored', {\n      signinToken\n    })\n    return this\n  }\n\n  async signin(data) {\n    let {\n      authToken,\n      profile\n    } = data\n    this.log('Signing into GraphQL server');\n    let created = await this.doCreateUser(data)\n    const signinResult = await this.doSigninUser(data)\n    const signinToken = this.extractSignedInUserToken(signinResult)\n    this.handleReceivedGraphQLServerToken(signinToken)\n    return {\n      status: signinResult,\n      token: signinToken,\n    }\n  }\n\n  handleReceivedGraphQLServerToken(signinToken) {\n    this.notifySuccess('token:received', {\n      signinToken\n    })\n    this.setGraphQLServerToken(signinToken)\n    this.setJwtToken(signinToken)\n  }\n\n  setJwtToken(signinToken) {\n    if (!this.connection) {\n      this.error('missing connection for setting JWT token')\n    }\n    this.connection.setJwtToken(signinToken, this.opts)\n    this.notifySuccess('jwt:token', {\n      signinToken\n    })\n  }\n\n  handleQueryError(err) {\n    if (!err.graphQLErrors ||\n      err.graphQLErrors[0].code !== errorCode.USER_ALREADY_EXISTS\n    ) {\n      this.handleError(err)\n    }\n  }\n\n  buildUserData(data) {\n    let {\n      authToken,\n      profile\n    } = data\n    return {\n      variables: {\n        authToken: authToken,\n        name: profile.name\n      }\n    }\n  }\n\n  // TODO: make more clean\n  async doCreateUser(data) {\n    let {\n      authToken,\n      profile\n    } = data\n    // create user if necessary\n    let result\n    let userData\n    try {\n      userData = this.buildUserData(data)\n      this.log('Create user', data);\n\n      this.validateQueries()\n\n      if (this.queries && this.queries.createUser) {\n        let query = this.queries.createUser(userData)\n        let result = await this.doQuery(query)\n        this.notifySuccess('user:create', {\n          authToken,\n          userData,\n          profile,\n          result\n        })\n        return result\n      } else {\n        this.log('missing createUser query, faking it')\n        return await this.fakeCreateUser(userData)\n      }\n    } catch (error) {\n      this.notifyFailure('user:create', {\n        authToken,\n        userData,\n        profile,\n        result,\n        error\n      })\n      this.handleQueryError(err)\n    }\n  }\n\n  validateQueries() {\n    if (typeof this.queries !== 'object') {\n      this.warn('No queries object defined', {\n        queries: this.queries\n      })\n    }\n  }\n\n  async doQuery(query, opts = {}) {\n    return await this.connection.doQuery(\n      query, opts)\n  }\n\n  // TODO: simulate GraphCool query mutation result?\n  fakeCreateUser(userData) {\n    return userData\n  }\n\n  buildSigninUserData({\n    authToken,\n    profile\n  }) {\n    return {\n      variables: {\n        authToken: authToken\n      }\n    }\n  }\n\n  // sign in user\n  async doSigninUser(data) {\n    let {\n      authToken,\n      profile\n    } = data\n    this.log('signin user', data);\n    this.validateQueries()\n\n    if (!(this.queries && this.queries.signinUser)) {\n      return this.fakeSigninUser(profile)\n    }\n    let userData = this.buildSigninUserData(data)\n    try {\n      let query = this.queries.signinUser(userData)\n      let result = await this.doQuery(query)\n      this.notifySuccess('server:signin', {\n        authToken,\n        profile,\n        userData,\n        result\n      })\n      return result\n    } catch (error) {\n      this.notifyFailure('server:signin', {\n        authToken,\n        profile,\n        userData,\n        error,\n      })\n      this.handleQueryError(error)\n    }\n  }\n\n  fakeSigninUser(profile) {\n    this.log('returning fake signedinUser')\n    return {\n      data: {\n        signinUser: {\n          token: '1234'\n        }\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/gql-auth.js","export {\n  GraphQLAuth\n}\nfrom './gql-auth'\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import {\n  Configurable\n} from '@tecla5/token-foundation'\n\nexport function createConnection(config, opts) {\n  return new GraphQLConnection(config, opts)\n}\n\nexport class GraphQLConnection extends Configurable {\n  constructor(config = {}, opts = {}) {\n    super(config, opts)\n    this.name = 'GraphQLConnection'\n    this.configure()\n    this.postConfig()\n  }\n\n  configure() {\n    super.configure()\n\n    if (this.configured.GraphQLConnection) return\n    let config = this.config\n\n    let gqlServer = config.gqlServer\n    if (!gqlServer) {\n      this.configError('missing gqlServer object in configuration')\n    }\n\n    this.log('gqlServer config', {\n      gqlServer\n    })\n    gqlServer.endpoint = process.env.gqlServer_endpoint || gqlServer.endpoint || gqlServer.connection.uri\n\n    this.config.gqlServer = gqlServer || {}\n    return this\n  }\n\n  prepareQuery(query, opts = {}) {\n    this.log('doQuery', {\n      query,\n      opts\n    })\n    if (!this.client) {\n      this.handleError('doQuery: missing client')\n    }\n\n    if (!query) {\n      this.handleError('doQuery: query is not defined', query)\n    }\n\n    if (this.isGqlQuery(query)) {\n      query = this.toGqlQuery(query)\n    }\n    return query\n  }\n\n  async doQuery(query, opts = {}) {\n    this.log('doQuery', {\n      query,\n      opts\n    })\n    this.handleError('doQuery: must be implemented by subclass')\n  }\n\n  isGqlQuery(query) {\n    if (typeof query !== 'object') return false\n    // see: https://www.npmjs.com/package/graphql-tag\n    if (query.kind === 'Document') return true\n    return false\n  }\n\n  toGqlQuery(queryStr, opts) {\n    if (typeof query !== 'string') {\n      this.handleError('toGqlQuery: bad query', queryStr)\n    }\n    if (typeof this.gql !== 'function') {\n      this.log('Try: https://www.npmjs.com/package/graphql-tag')\n      this.error('Also see: https://www.npmjs.com/package/graphql')\n      this.handleError('missing gql function to convert query string to GraphQL query')\n    }\n    return this.gql(query, opts)\n  }\n\n  postConfig() {\n    this.validateConfig()\n    this.configured.GraphQLConnection = true\n  }\n\n  validateConfig(force) {\n    if (this.validated.GraphQLConnection && !force) return\n    this.validated.GraphQLConnection = false\n    super.validateConfig(force)\n    this.validated.GraphQLConnection = true\n  }\n\n  get defaultHeaders() {\n    return null\n  }\n\n  setJwtToken(signinToken, opts = {}) {\n    this.log('setJwtToken not yet implemented on GraphQL server Connection :(', {\n      signinToken\n    })\n  }\n\n  get authTokenKeyName() {\n    return process.env.gqlServer_tokenKeyName || this.keyNames.gqlServerTokenKeyName\n  }\n\n  get authToken() {\n    return this.store.getItem(this.authTokenKeyName) || null\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../gql-conn/src/gql-connection.js","export {\n  GraphQLConnection,\n  createConnection\n}\nfrom './gql-connection'\n\n\n\n// WEBPACK FOOTER //\n// ../gql-conn/src/index.js","import defaultKeyNames from './keynames'\nimport {\n  Notifiable\n} from './notifiable'\n\nimport {\n  Store,\n  createStore\n} from './store'\n\nimport {\n  isFun,\n  isObject,\n  isArray\n} from './is-type'\n\nexport class Configurable extends Notifiable {\n  constructor(config = {}, opts = {}) {\n    super('Configurable', opts)\n    this.configured = {}\n    this.validated = {}\n\n    this.validate(config)\n    this.log('configuring with', {\n      config,\n      opts\n    })\n    this.opts = this.opts || opts\n    this.config = config\n    this.configure()\n    this.postConfig()\n  }\n\n  configure() {\n    if (this.configured.Configurable) return\n    this.log('Configurable: configure')\n    this.observers = {}\n    this.configureStorage()\n    this.configured.Configurable = true\n    return this\n  }\n\n  postConfig() {\n    this.validateConfig()\n    this.retrieveTokens()\n    return this\n  }\n\n  configureStorage() {\n    this.log('configureStorage')\n    let config = this.config\n    let opts = this.opts\n    let containers = [config, opts]\n    this.extractProperties(containers, 'storage', 'keyNames', 'store')\n    this.keyNames = this.keyNames || this.storage || defaultKeyNames\n    this.store = this.store || this.createStore(this.keyNames, this.opts)\n    return this\n  }\n\n  validateConfig(force = false) {\n    if (this.validated.Configurable && !force) return\n    this.log('validateConfig', {\n      store: this.store,\n      keyNames: this.keyNames\n    })\n    if (typeof this.store !== 'object') {\n      this.configError('missing store for holding auth tokens')\n    }\n\n    if (typeof this.keyNames !== 'object') {\n      this.configError('missing keyNames object, used to indicate store token keys')\n    }\n    this.validated.Configurable = true\n  }\n\n  retrieveTokens() {\n    this.log('retrieveTokens', {\n      store: this.store\n    })\n    if (!isFun(this.store.getAll)) {\n      this.error(\"Store is missing function getAll to retrieve tokens\")\n    }\n    this.tokens = this.store.getAll() || {}\n    return this\n  }\n\n  extractProperty(containers, name, selfie) {\n    this.log('extractProperty', name, {\n      self: selfie\n    })\n    if (!isArray(containers)) {\n      this.handleError('extractProperty: containes must be an Array', containers)\n    }\n\n    let container = containers.find(container => (container || {})[name]) || {}\n    let value = container[name]\n    if (!value) {\n      this.warn('no value found for', name)\n    }\n    if (selfie && value) {\n      let displayValue = isFun(value) ? value.name : value\n      this.log('extract: set', name, 'to', displayValue)\n      this[name] = value\n    }\n    return value\n  }\n\n  extractProps(selfie, containers, ...names) {\n    this.log('extractProperties', names)\n    return names.reduce((acc, name) => {\n      let value = this.extractProperty(containers, name, selfie)\n      acc[name] = value\n      return acc\n    }, {})\n  }\n\n  extractProperties(containers, ...names) {\n    return this.extractProps(true, containers, ...names)\n  }\n\n  configError(msg) {\n    this.handleError(msg)\n  }\n\n  createStore(keyNames, opts = {}) {\n    let {\n      createStore\n    } = opts\n    keyNames = keyNames || this.keyNames\n    opts = opts || this.opts\n    this.log('createStore', {\n      keyNames,\n      opts\n    })\n\n    createStore = isFun(createStore) ? createStore : this.defaultCreateStore\n    this.log('create with', {\n      createStore\n    })\n    return createStore(keyNames, opts)\n  }\n\n  defaultCreateStore(keyNames, opts) {\n    return createStore(keyNames, opts)\n  }\n\n  validate(config) {\n    if (!isObject(config)) {\n      this.handleError('config must be an object', config)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../token-foundation/src/configurable.js","export {\n  Configurable\n}\nfrom './configurable'\n\nexport {\n  keyNames\n}\nfrom './keynames'\n\nexport {\n  Store,\n  createStore\n}\nfrom './store'\n\n\n// WEBPACK FOOTER //\n// ../token-foundation/src/index.js","export function isFun(fun) {\n  return typeof fun === 'function'\n}\n\nexport function isObject(obj) {\n  return typeof obj === 'object'\n}\n\nexport function isArray(obj) {\n  return Array.isArray(obj)\n}\n\n\n// WEBPACK FOOTER //\n// ../token-foundation/src/is-type.js","export class Loggable {\n  constructor(name, opts = {}) {\n    this.opts = opts\n    this.io = opts.io || console\n    this.logging = opts.logging\n    this.name = name || opts.name\n  }\n\n  handleError(err, data) {\n    this.error(err, data)\n    if (this.notify) {\n      this.notify('error', data)\n    }\n    throw err\n  }\n\n  enableLog() {\n    this.logging = true\n    return this\n  }\n\n  disableLog() {\n    this.logging = false\n    return this\n  }\n\n  label(lv) {\n    lv = lv.toUpperCase()\n    return `[${this.name}] ${lv}:`\n  }\n\n  warn(msg, data) {\n    if (this.logging) {\n      return this.io.log(this.label('warning'), msg, data)\n    }\n  }\n\n  log(msg, data) {\n    if (this.logging) {\n      return this.io.log(this.label('info'), msg, data)\n    }\n  }\n\n  error(msg, data) {\n    if (this.logging) {\n      return this.io.error(this.label('error'), msg, data)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../token-foundation/src/loggable.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process/browser.js\n// module id = 11\n// module chunks = 0"],"sourceRoot":""}